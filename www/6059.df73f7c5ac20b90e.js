"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[6059],{6059:(x,u,c)=>{c.r(u),c.d(u,{TerritoryPage:()=>m});var s=c(5861),y=c(6814),h=c(209),i=c(3582),_=c(95),r=c(6689),g=c(9930),T=c(4414);const d=function(){return["/territory",""]};function S(n,l){if(1&n){const t=r.EpF();r.TgZ(0,"ion-toolbar",5)(1,"ion-buttons",6),r._UZ(2,"ion-back-button",7),r.qZA(),r.TgZ(3,"ion-title"),r._uU(4,"Territory"),r.qZA(),r.TgZ(5,"ion-buttons",8)(6,"ion-button",9),r.NdJ("click",function(){r.CHM(t);const o=r.oxw();return r.KtG(o.toggleSearchBar())}),r._UZ(7,"ion-icon",10),r.qZA()(),r.TgZ(8,"ion-buttons",8)(9,"ion-button",11),r._UZ(10,"ion-icon",12),r.qZA()()()}2&n&&(r.xp6(9),r.Q6J("routerLink",r.DdM(1,d)))}function f(n,l){if(1&n){const t=r.EpF();r.TgZ(0,"ion-toolbar",5)(1,"ion-buttons",6),r._UZ(2,"ion-back-button"),r.qZA(),r.TgZ(3,"ion-searchbar",13),r.NdJ("ngModelChange",function(o){r.CHM(t);const a=r.oxw();return r.KtG(a.territoryService.searchTerm=o)}),r.qZA(),r.TgZ(4,"ion-buttons",14)(5,"ion-button",15),r.NdJ("click",function(){r.CHM(t);const o=r.oxw();return r.KtG(o.search(o.territoryService.searchTerm))}),r._uU(6,"Search"),r.qZA()(),r.TgZ(7,"ion-buttons",14)(8,"ion-button",15),r.NdJ("click",function(){r.CHM(t);const o=r.oxw();return r.KtG(o.cancelSearch())}),r._uU(9,"Cancel"),r.qZA()()()}if(2&n){const t=r.oxw();r.xp6(3),r.Q6J("ngModel",t.territoryService.searchTerm)}}const v=function(n){return["/territory",n]};function p(n,l){if(1&n&&(r.TgZ(0,"ion-item",11)(1,"ion-label")(2,"strong"),r._uU(3),r.qZA(),r._UZ(4,"br"),r.TgZ(5,"ion-note",16),r._uU(6),r.qZA()(),r.TgZ(7,"div",17),r._UZ(8,"ion-icon",18),r.qZA()()),2&n){const t=l.$implicit;r.Q6J("routerLink",r.VKq(3,v,t.id)),r.xp6(3),r.Oqu(t.territoryCode),r.xp6(3),r.hij(" ",t.territoryName," ")}}let m=(()=>{class n{constructor(t,e){this.territoryService=t,this.toastCtrl=e}ngOnInit(){this.territoryService.searchTerm="",this.fetchTerritoryList(this.territoryService.pageIndex,this.territoryService.pageSize,this.territoryService.searchTerm),this.territoryService.pageIndex+=1}fetchTerritoryList(t,e,o){var a=this;return(0,s.Z)(function*(){yield a.territoryService.refreshTerritoryList(t,e,o)})()}onScrollLoadData(t){var e=this;return(0,s.Z)(function*(){e.territoryService.territoryList.length!==e.territoryService.totalCount&&(e.fetchTerritoryList(e.territoryService.pageIndex,e.territoryService.pageSize,e.territoryService.searchTerm),e.territoryService.pageIndex+=1),setTimeout(()=>{t.target.complete()},500)})()}toggleSearchBar(){this.territoryService.showSearchBar=!this.territoryService.showSearchBar}cancelSearch(){var t=this;return(0,s.Z)(function*(){t.territoryService.showSearchBar=!1,t.territoryService.searchTerm="",t.territoryService.pageIndex=1,t.territoryService.territoryList=[],yield t.fetchTerritoryList(t.territoryService.pageIndex,t.territoryService.pageSize,t.territoryService.searchTerm),t.territoryService.pageIndex+=1})()}search(t){var e=this;return(0,s.Z)(function*(){e.territoryService.pageIndex=1,e.territoryService.territoryList=[],yield e.fetchTerritoryList(e.territoryService.pageIndex,e.territoryService.pageSize,t),e.territoryService.pageIndex+=1})()}showToast(t,e){var o=this;return(0,s.Z)(function*(){yield o.toastCtrl.create({message:t,duration:2e3,position:"top",color:e,buttons:[{text:"ok",handler:()=>{}}]}).then(a=>a.present())})()}static#r=this.\u0275fac=function(e){return new(e||n)(r.Y36(g.j),r.Y36(T.yF))};static#t=this.\u0275cmp=r.Xpm({type:n,selectors:[["app-territory"]],standalone:!0,features:[r.jDz],decls:8,vars:5,consts:[[3,"translucent"],["color","primary",4,"ngIf"],[3,"fullscreen"],[3,"routerLink",4,"ngFor","ngForOf"],[3,"ionInfinite"],["color","primary"],["slot","start"],["defaultHref","/"],["slot","primary"],["expand","block",3,"click"],["name","search-outline"],[3,"routerLink"],["name","add-outline","slot","icon-only"],[3,"ngModel","ngModelChange"],["slot","end"],[2,"text-transform","none",3,"click"],["color","medium",1,"ion-text-wrap"],["slot","end",1,"metadata-end-wrapper"],["color","medium","name","chevron-forward"]],template:function(e,o){1&e&&(r.TgZ(0,"ion-header",0),r.YNc(1,S,11,2,"ion-toolbar",1),r.YNc(2,f,10,1,"ion-toolbar",1),r.qZA(),r.TgZ(3,"ion-content",2)(4,"ion-list"),r.YNc(5,p,9,5,"ion-item",3),r.qZA(),r.TgZ(6,"ion-infinite-scroll",4),r.NdJ("ionInfinite",function(Z){return o.onScrollLoadData(Z)}),r._UZ(7,"ion-infinite-scroll-content"),r.qZA()()),2&e&&(r.Q6J("translucent",!0),r.xp6(1),r.Q6J("ngIf",!o.territoryService.showSearchBar),r.xp6(1),r.Q6J("ngIf",o.territoryService.showSearchBar),r.xp6(1),r.Q6J("fullscreen",!0),r.xp6(2),r.Q6J("ngForOf",o.territoryService.territoryList))},dependencies:[i.Pc,i.YG,i.Sm,i.W2,i.Gu,i.gu,i.ju,i.MB,i.Ie,i.Q$,i.q_,i.uN,i.VI,i.wd,i.sr,i.j9,i.oU,i.YI,h.rH,y.ax,y.O5,_.u5,_.JJ,_.On]})}return n})()}}]);