"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[2038],{2038:(S,u,n)=>{n.r(u),n.d(u,{WorkingTypeDetailPage:()=>v});var d=n(5861),T=n(6814),a=n(95),c=n(209),o=n(3582),p=n(6306),g=n(8504),e=n(6689),_=n(2131),h=n(4414),m=n(2722);function k(s,y){if(1&s){const i=e.EpF();e.TgZ(0,"ion-buttons",13)(1,"ion-button",14),e.NdJ("click",function(){e.CHM(i);const r=e.oxw();return e.KtG(r.ChangeViewDataFlag())}),e._UZ(2,"ion-icon",15),e.qZA()()}}function f(s,y){1&s&&(e.TgZ(0,"ion-buttons",16)(1,"ion-button",17),e._uU(2,"Save"),e.qZA()()),2&s&&e.Q6J("collapse",!0)}const D=function(){return["/working-type"]};function w(s,y){1&s&&(e.TgZ(0,"ion-buttons",16)(1,"ion-button",18),e._uU(2,"Cancel"),e.qZA()()),2&s&&(e.Q6J("collapse",!0),e.xp6(1),e.Q6J("routerLink",e.DdM(2,D)))}let v=(()=>{class s{constructor(i,t,r,l,b,P,W){this._fb=i,this.activatedRoute=t,this.workingTypeService=r,this.router=l,this.alertCtrl=b,this.toastCtrl=P,this.loader=W,this.loadedWorkingType={},this.ViewDataFlag=!1}ngOnInit(){this.initWorkingTypeForm(),this.activatedRoute.paramMap.subscribe(i=>{if(i.has("WorkingTypeId"))if(i.get("WorkingTypeId")){const t=JSON.parse(i.get("WorkingTypeId"));this.ViewDataFlag=!0,this.loadProductTypeDetails(t)}else this.loadProductTypeDetails();else this.router.navigate(["/working-type"])})}initWorkingTypeForm(){this.workingTypeForm=this._fb.group({id:[0],typeCode:["",a.kI.required],typeName:["",a.kI.required],active:["",a.kI.required]}),this.workingTypeForm.controls.active.setValue("Y")}enableFormControl(i){1==i?(this.workingTypeForm.get("typeCode").enable(),this.workingTypeForm.get("typeName").enable(),this.workingTypeForm.get("active").enable()):(this.workingTypeForm.get("typeCode").disable(),this.workingTypeForm.get("typeName").disable(),this.workingTypeForm.get("active").disable())}loadProductTypeDetails(i=-1){-1==i||(this.workingTypeService.getWorkingType(i).pipe((0,p.K)(t=>(this.showToast("Some error has been occured","danger"),(0,g._)(()=>t)))).subscribe(t=>{t.responseData&&(this.loadedWorkingType=t.responseData[0],this.workingTypeForm.patchValue({id:this.loadedWorkingType.id,typeCode:this.loadedWorkingType.typeCode,typeName:this.loadedWorkingType.typeName,active:this.loadedWorkingType.active}))}),this.enableFormControl(!1))}ChangeViewDataFlag(){this.ViewDataFlag=!1,this.enableFormControl(!0)}DeleteProductType(){const i=this.loadedWorkingType.id;this.alertCtrl.create({header:"Are you sure?",message:"Do you really want to delete the product Type?",buttons:[{text:"Cancel",role:"cancel"},{text:"Delete",handler:()=>{this.loader.present(),this.workingTypeService.deleteWorkingType(i).pipe((0,p.K)(t=>(this.loader.dismiss(),this.showToast("Some error has been occured","danger"),(0,g._)(()=>t)))).subscribe(t=>{this.loader.dismiss(),t.responseData&&t.responseData.id==this.loadedWorkingType.id&&0==t.errCode&&(this.showToast("Working Type Deleted Successfully","secondary"),this.workingTypeService.resetValues(),this.fetchProductTypeList(this.workingTypeService.pageIndex,this.workingTypeService.pageSize,this.workingTypeService.searchTerm),this.router.navigate(["/working-type"]))})}}]}).then(t=>{t.present()})}onSubmit({value:i}){i.id?(this.loader.present(),this.workingTypeService.updateWorkingType(i.id,i).pipe((0,p.K)(t=>(this.loader.dismiss(),this.showToast("Some error has been occured","danger"),(0,g._)(()=>t)))).subscribe(t=>{this.loader.dismiss(),t.responseData&&t.responseData.id&&0==t.errCode&&(this.showToast("Product Type updated Successfully","secondary"),this.workingTypeService.resetValues(),this.fetchProductTypeList(this.workingTypeService.pageIndex,this.workingTypeService.pageSize,this.workingTypeService.searchTerm),this.router.navigate(["/working-type"]))})):(this.loader.present(),this.workingTypeService.AddWorkingType(i).pipe((0,p.K)(t=>(this.loader.dismiss(),this.showToast("Some error has been occured","danger"),(0,g._)(()=>t)))).subscribe(t=>{this.loader.dismiss(),t.responseData&&t.responseData.id&&0==t.errCode&&(this.showToast("Working Type Added Successfully","secondary"),this.workingTypeService.resetValues(),this.fetchProductTypeList(this.workingTypeService.pageIndex,this.workingTypeService.pageSize,this.workingTypeService.searchTerm),this.router.navigate(["/working-type"]))}))}fetchProductTypeList(i,t,r){var l=this;return(0,d.Z)(function*(){yield l.workingTypeService.refreshworkingTypeList(i,t,r)})()}showToast(i,t){var r=this;return(0,d.Z)(function*(){yield r.toastCtrl.create({message:i,duration:2e3,position:"top",color:t,buttons:[{text:"ok",handler:()=>{}}]}).then(l=>l.present())})()}static#e=this.\u0275fac=function(t){return new(t||s)(e.Y36(a.qu),e.Y36(c.gz),e.Y36(_.d),e.Y36(c.F0),e.Y36(h.Br),e.Y36(h.yF),e.Y36(m.D))};static#t=this.\u0275cmp=e.Xpm({type:s,selectors:[["app-working-type-detail"]],standalone:!0,features:[e.jDz],decls:24,vars:6,consts:[[3,"formGroup","ngSubmit"],[3,"translucent"],["color","primary"],["slot","start"],["defaultHref","/working-type"],["slot","primary",4,"ngIf"],["slot","end",3,"collapse",4,"ngIf"],[3,"fullscreen"],["no-padding",""],["id","ionInputTypeName","label","Working Type Name","labelPlacement","floating","formControlName","typeName"],["aria-label","Active","interface","popover","value","Y","placeholder","Active","formControlName","active"],["value","Y"],["value","N"],["slot","primary"],[3,"click"],["name","create-outline","slot","icon-only"],["slot","end",3,"collapse"],["type","submit"],[3,"routerLink"]],template:function(t,r){1&t&&(e.TgZ(0,"form",0),e.NdJ("ngSubmit",function(){return r.onSubmit(r.workingTypeForm)}),e.TgZ(1,"ion-header",1)(2,"ion-toolbar",2)(3,"ion-buttons",3),e._UZ(4,"ion-back-button",4),e.qZA(),e.TgZ(5,"ion-title"),e._uU(6,"Working Type Details"),e.qZA(),e.YNc(7,k,3,0,"ion-buttons",5),e.YNc(8,f,3,1,"ion-buttons",6),e.YNc(9,w,3,3,"ion-buttons",6),e.qZA()(),e.TgZ(10,"ion-content",7)(11,"ion-grid",8)(12,"ion-row")(13,"ion-col",8)(14,"ion-item"),e._UZ(15,"ion-input",9),e.qZA()()(),e.TgZ(16,"ion-row")(17,"ion-col",8)(18,"ion-item")(19,"ion-select",10)(20,"ion-select-option",11),e._uU(21,"Yes"),e.qZA(),e.TgZ(22,"ion-select-option",12),e._uU(23,"No"),e.qZA()()()()()()()()),2&t&&(e.Q6J("formGroup",r.workingTypeForm),e.xp6(1),e.Q6J("translucent",!0),e.xp6(6),e.Q6J("ngIf",1==r.ViewDataFlag),e.xp6(1),e.Q6J("ngIf",0==r.ViewDataFlag),e.xp6(1),e.Q6J("ngIf",0==r.ViewDataFlag),e.xp6(1),e.Q6J("fullscreen",!0))},dependencies:[o.Pc,o.YG,o.Sm,o.wI,o.W2,o.jY,o.Gu,o.gu,o.pK,o.Ie,o.Nd,o.t9,o.n0,o.wd,o.sr,o.QI,o.j9,o.oU,o.YI,c.rH,T.O5,a.UX,a._Y,a.JJ,a.JL,a.sg,a.u]})}return s})()}}]);