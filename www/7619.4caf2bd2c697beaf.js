"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[7619],{7619:(P,u,s)=>{s.r(u),s.d(u,{DailyActivityDetailPage:()=>Z});var v=s(5861),m=s(6814),r=s(95),h=s(209),o=s(3582),d=s(6306),y=s(8504),i=s(6689),g=s(931),p=s(4414),A=s(2722);function _(a,c){if(1&a){const e=i.EpF();i.TgZ(0,"ion-buttons",24)(1,"ion-button",25),i.NdJ("click",function(){i.CHM(e);const l=i.oxw();return i.KtG(l.ChangeViewDataFlag())}),i._UZ(2,"ion-icon",26),i.qZA()()}}function D(a,c){1&a&&(i.TgZ(0,"ion-buttons",27)(1,"ion-button",28),i._uU(2,"Save"),i.qZA()()),2&a&&i.Q6J("collapse",!0)}const T=function(){return["/dailyactivity"]};function I(a,c){1&a&&(i.TgZ(0,"ion-buttons",27)(1,"ion-button",29),i._uU(2,"Cancel"),i.qZA()()),2&a&&(i.Q6J("collapse",!0),i.xp6(1),i.Q6J("routerLink",i.DdM(2,T)))}function f(a,c){if(1&a&&(i.TgZ(0,"ion-select-option",30),i._uU(1),i.qZA()),2&a){const e=c.$implicit;i.Q6J("value",e.id),i.xp6(1),i.hij(" ",e.territoryCode," ")}}function b(a,c){if(1&a&&(i.TgZ(0,"ion-select-option",30),i._uU(1),i.qZA()),2&a){const e=c.$implicit;i.Q6J("value",e.id),i.xp6(1),i.hij(" ",e.groupName," ")}}function C(a,c){if(1&a&&(i.TgZ(0,"ion-select-option",30),i._uU(1),i.qZA()),2&a){const e=c.$implicit;i.Q6J("value",e.id),i.xp6(1),i.hij(" ",e.typeCode," ")}}let Z=(()=>{class a{constructor(e,t,l,n,S,k,F){this._fb=e,this.activatedRoute=t,this.dailyActivityService=l,this.router=n,this.alertCtrl=S,this.toastCtrl=k,this.loader=F,this.loadedDailyActivity={},this.ViewDataFlag=!1}ngOnInit(){console.log(this.dailyActivityForm),this.initDailyActivityForm(),this.activatedRoute.paramMap.subscribe(e=>{if(e.has("dailyactivityId"))if(e.get("dailyactivityId")){const t=JSON.parse(e.get("dailyactivityId"));this.ViewDataFlag=!0,this.loadDailyActivityDetails(t)}else this.loadDailyActivityDetails();else this.router.navigate(["/dailyactivity"])})}initDailyActivityForm(){this.dailyActivityForm=this._fb.group({id:[0],TerritoryId:["",r.kI.required],DoctorId:["",r.kI.required],ChemistId:["",r.kI.required],StockistId:["",r.kI.required],ProductId:["",r.kI.required],WorkingTypeId:["",r.kI.required],VisitedWithId:["",r.kI.required],CheckInTime:[r.kI.required],CheckOutTime:[r.kI.required],Remark:[r.kI.required]}),this.dailyActivityService.getProductTypeList(),this.dailyActivityService.getTerritoryList(),this.dailyActivityService.getWorkingTypeList()}enableFormControl(e){1==e?(this.dailyActivityForm.get("TerritoryId").enable(),this.dailyActivityForm.get("DoctorId").enable(),this.dailyActivityForm.get("ChemistId").enable(),this.dailyActivityForm.get("StockistId").enable(),this.dailyActivityForm.get("ProductId").enable(),this.dailyActivityForm.get("WorkingTypeId").enable(),this.dailyActivityForm.get("VisitedWithId").enable(),this.dailyActivityForm.get("CheckInTime").enable(),this.dailyActivityForm.get("CheckOutTime").enable(),this.dailyActivityForm.get("Remark").enable()):(this.dailyActivityForm.get("TerritoryId").disable(),this.dailyActivityForm.get("DoctorId").disable(),this.dailyActivityForm.get("ChemistId").disable(),this.dailyActivityForm.get("StockistId").disable(),this.dailyActivityForm.get("ProductId").disable(),this.dailyActivityForm.get("WorkingTypeId").disable(),this.dailyActivityForm.get("VisitedWithId").disable(),this.dailyActivityForm.get("CheckInTime").disable(),this.dailyActivityForm.get("CheckOutTime").disable(),this.dailyActivityForm.get("Remark").disable())}loadDailyActivityDetails(e=-1){-1==e||(this.dailyActivityService.getDailyActivity(e).pipe((0,d.K)(t=>(this.showToast("Some error has been occured","danger"),(0,y._)(()=>t)))).subscribe(t=>{t.responseData&&(this.loadedDailyActivity=t.responseData[0],this.dailyActivityForm.patchValue({id:this.loadedDailyActivity.id,TerritoryId:this.loadedDailyActivity.TerritoryId,DoctorId:this.loadedDailyActivity.DoctorId,ChemistId:this.loadedDailyActivity.ChemistId,StockistId:this.loadedDailyActivity.StockistId,ProductId:this.loadedDailyActivity.ProductId,WorkingTypeId:this.loadedDailyActivity.WorkingTypeId,VisitedWithId:this.loadedDailyActivity.VisitedWithId,CheckInTime:this.loadedDailyActivity.CheckInTime,CheckOutTime:this.loadedDailyActivity.CheckOutTime,Remark:this.loadedDailyActivity.Remark}))}),this.enableFormControl(!1))}ChangeViewDataFlag(){this.ViewDataFlag=!1,this.enableFormControl(!0)}DeleteProductType(){const e=this.loadedDailyActivity.id;this.alertCtrl.create({header:"Are you sure?",message:"Do you really want to delete the product Type?",buttons:[{text:"Cancel",role:"cancel"},{text:"Delete",handler:()=>{this.loader.present(),this.dailyActivityService.deleteDailyActivity(e).pipe((0,d.K)(t=>(this.loader.dismiss(),this.showToast("Some error has been occured","danger"),(0,y._)(()=>t)))).subscribe(t=>{this.loader.dismiss(),t.responseData&&t.responseData.id==this.loadedDailyActivity.id&&0==t.errCode&&(this.showToast("Product Type Deleted Successfully","secondary"),this.dailyActivityService.resetValues(),this.fetchDailyActivityList(this.dailyActivityService.pageIndex,this.dailyActivityService.pageSize,this.dailyActivityService.searchTerm),this.router.navigate(["/dailyactivity"]))})}}]}).then(t=>{t.present()})}onSubmit({value:e}){e.id?(this.loader.present(),this.dailyActivityService.updateDailyActivity(e.id,e).pipe((0,d.K)(t=>(this.loader.dismiss(),this.showToast("Some error has been occured","danger"),(0,y._)(()=>t)))).subscribe(t=>{this.loader.dismiss(),t.responseData&&t.responseData.id&&0==t.errCode&&(this.showToast("Product Type updated Successfully","secondary"),this.dailyActivityService.resetValues(),this.fetchDailyActivityList(this.dailyActivityService.pageIndex,this.dailyActivityService.pageSize,this.dailyActivityService.searchTerm),this.router.navigate(["/dailyactivity"]))})):(this.loader.present(),this.dailyActivityService.AddDailyActivity(e).pipe((0,d.K)(t=>(this.loader.dismiss(),this.showToast("Some error has been occured","danger"),(0,y._)(()=>t)))).subscribe(t=>{this.loader.dismiss(),t.responseData&&t.responseData.id&&0==t.errCode&&(this.showToast("Product Type Added Successfully","secondary"),this.dailyActivityService.resetValues(),this.fetchDailyActivityList(this.dailyActivityService.pageIndex,this.dailyActivityService.pageSize,this.dailyActivityService.searchTerm),this.router.navigate(["/dailyactivity"]))}))}fetchDailyActivityList(e,t,l){var n=this;return(0,v.Z)(function*(){yield n.dailyActivityService.refreshDailyActivityList(e,t,l)})()}showToast(e,t){var l=this;return(0,v.Z)(function*(){yield l.toastCtrl.create({message:e,duration:2e3,position:"top",color:t,buttons:[{text:"ok",handler:()=>{}}]}).then(n=>n.present())})()}static#i=this.\u0275fac=function(t){return new(t||a)(i.Y36(r.qu),i.Y36(h.gz),i.Y36(g.N),i.Y36(h.F0),i.Y36(p.Br),i.Y36(p.yF),i.Y36(A.D))};static#t=this.\u0275cmp=i.Xpm({type:a,selectors:[["app-daily-activity-detail"]],standalone:!0,features:[i.jDz],decls:74,vars:9,consts:[[3,"formGroup","ngSubmit"],[3,"translucent"],["color","primary"],["slot","start"],["defaultHref","/dailyactivity"],["slot","primary",4,"ngIf"],["slot","end",3,"collapse",4,"ngIf"],[3,"fullscreen"],["no-padding",""],["size","10","size-md","10","size-lg","11","no-padding",""],["presentation","date","placeholder","Check Out","displayFormat","MM/DD/YYYY","formControlName","CheckOutTime","locale","en-US"],["aria-label","Active","interface","popover","placeholder","Select Territory","formControlName","TerritoryId"],[3,"value",4,"ngFor","ngForOf"],["aria-label","DoctorId","interface","popover","placeholder","Select Doctor","formControlName","DoctorId"],["fill","outline",2,"background-color","white","border-radius","10px"],["aria-label","Chemist","interface","popover","placeholder","Select Chemist","formControlName","ChemistId"],["fill","outline",2,"background-color","white","background","none"],["aria-label","StockistId","interface","popover","placeholder","Select Stockist","formControlName","StockistId"],["aria-label","ProductId","interface","popover","placeholder","Select Product","formControlName","ProductId"],["aria-label","WorkingTypeId","interface","popover","placeholder","Select Working Type","formControlName","WorkingTypeId"],["aria-label","VisitedWithId","interface","popover","placeholder","Select Visited With","formControlName","VisitedWithId"],["presentation","time","placeholder","Check in","displayFormat","h:mm","formControlName","CheckInTime","locale","en-US"],["presentation","time","placeholder","Check Out","displayFormat","h:mm","formControlName","CheckOutTime","locale","en-US"],["placeholder","Remark","formControlName","Remark"],["slot","primary"],[3,"click"],["name","create-outline","slot","icon-only"],["slot","end",3,"collapse"],["type","submit"],[3,"routerLink"],[3,"value"]],template:function(t,l){1&t&&(i.TgZ(0,"form",0),i.NdJ("ngSubmit",function(){return l.onSubmit(l.dailyActivityForm)}),i.TgZ(1,"ion-header",1)(2,"ion-toolbar",2)(3,"ion-buttons",3),i._UZ(4,"ion-back-button",4),i.qZA(),i.TgZ(5,"ion-title"),i._uU(6,"Daily Activity Details"),i.qZA(),i.YNc(7,_,3,0,"ion-buttons",5),i.YNc(8,D,3,1,"ion-buttons",6),i.YNc(9,I,3,3,"ion-buttons",6),i.qZA()(),i.TgZ(10,"ion-content",7)(11,"ion-grid",8)(12,"ion-row")(13,"ion-col",9),i._UZ(14,"ion-label"),i.TgZ(15,"ion-item"),i._UZ(16,"ion-datetime",10),i.qZA()()(),i.TgZ(17,"ion-row")(18,"ion-col",9)(19,"ion-item")(20,"ion-select",11),i.YNc(21,f,2,2,"ion-select-option",12),i.qZA()()()(),i.TgZ(22,"ion-row")(23,"ion-col",9)(24,"ion-item"),i._UZ(25,"ion-select",13),i.qZA()(),i.TgZ(26,"ion-col",8)(27,"ion-button",14),i._uU(28,"+"),i.qZA()()(),i.TgZ(29,"ion-row")(30,"ion-col",9)(31,"ion-item"),i._UZ(32,"ion-select",15),i.qZA()(),i.TgZ(33,"ion-col",8)(34,"ion-button",16),i._uU(35,"+"),i.qZA()()(),i.TgZ(36,"ion-row")(37,"ion-col",9)(38,"ion-item"),i._UZ(39,"ion-select",17),i.qZA()(),i.TgZ(40,"ion-col",8)(41,"ion-button",14),i._uU(42," + "),i.qZA()()(),i.TgZ(43,"ion-row")(44,"ion-col",9)(45,"ion-item")(46,"ion-select",18),i.YNc(47,b,2,2,"ion-select-option",12),i.qZA()()()(),i.TgZ(48,"ion-row")(49,"ion-col",9)(50,"ion-item")(51,"ion-select",19),i._uU(52," < "),i.YNc(53,C,2,2,"ion-select-option",12),i.qZA()()()(),i.TgZ(54,"ion-row")(55,"ion-col",9)(56,"ion-item"),i._UZ(57,"ion-select",20),i.qZA()()(),i.TgZ(58,"ion-row")(59,"ion-col",9)(60,"ion-label"),i._uU(61,"Check In"),i.qZA(),i.TgZ(62,"ion-item"),i._UZ(63,"ion-datetime",21),i.qZA()()(),i.TgZ(64,"ion-row")(65,"ion-col",9)(66,"ion-label"),i._uU(67,"Check Out"),i.qZA(),i.TgZ(68,"ion-item"),i._UZ(69,"ion-datetime",22),i.qZA()()(),i.TgZ(70,"ion-row")(71,"ion-col",9)(72,"ion-item"),i._UZ(73,"ion-textarea",23),i.qZA()()()()()()),2&t&&(i.Q6J("formGroup",l.dailyActivityForm),i.xp6(1),i.Q6J("translucent",!0),i.xp6(6),i.Q6J("ngIf",1==l.ViewDataFlag),i.xp6(1),i.Q6J("ngIf",0==l.ViewDataFlag),i.xp6(1),i.Q6J("ngIf",0==l.ViewDataFlag),i.xp6(1),i.Q6J("fullscreen",!0),i.xp6(11),i.Q6J("ngForOf",l.dailyActivityService.TerritoryList),i.xp6(26),i.Q6J("ngForOf",l.dailyActivityService.ProductTypeList),i.xp6(6),i.Q6J("ngForOf",l.dailyActivityService.WorkingTypeList))},dependencies:[o.Pc,o.YG,o.Sm,o.wI,o.W2,o.x4,o.jY,o.Gu,o.gu,o.Ie,o.Q$,o.Nd,o.t9,o.n0,o.g2,o.wd,o.sr,o.QI,o.j9,o.oU,o.YI,h.rH,m.ax,m.O5,r.UX,r._Y,r.JJ,r.JL,r.sg,r.u]})}return a})()}}]);