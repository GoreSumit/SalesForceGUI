"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[9594],{9594:(y,d,i)=>{i.r(d),i.d(d,{ExpenseMasterDetailsPage:()=>A});var h=i(5861),_=i(6814),o=i(95),u=i(209),a=i(3582),c=i(6306),p=i(8504),e=i(6689),x=i(2005),m=i(4414),D=i(2722);const E=["class","page"];function f(r,g){if(1&r){const s=e.EpF();e.TgZ(0,"ion-buttons",15)(1,"ion-button",16),e.NdJ("click",function(){e.CHM(s);const n=e.oxw();return e.KtG(n.ChangeViewDataFlag())}),e._UZ(2,"ion-icon",17),e.qZA()()}}function M(r,g){1&r&&(e.TgZ(0,"ion-buttons",18)(1,"ion-button",19),e._uU(2,"Save"),e.qZA()()),2&r&&e.Q6J("collapse",!0)}const b=function(){return["/expensemaster"]};function T(r,g){1&r&&(e.TgZ(0,"ion-buttons",18)(1,"ion-button",20),e._uU(2,"Cancel"),e.qZA()()),2&r&&(e.Q6J("collapse",!0),e.xp6(1),e.Q6J("routerLink",e.DdM(2,b)))}let A=(()=>{class r{constructor(s,t,n,l,S,v,w){this._fb=s,this.activatedRoute=t,this.expensemasterService=n,this.router=l,this.alertCtrl=S,this.toastCtrl=v,this.loader=w,this.loadedExpenseMaster={},this.ViewDataFlag=!1}ngOnInit(){this.initExpenseForm(),this.activatedRoute.paramMap.subscribe(s=>{if(s.has("expensemasterId"))if(s.get("expensemasterId")){const t=JSON.parse(s.get("expensemasterId"));this.ViewDataFlag=!0,this.loadExpenseMasterDetails(t)}else this.loadExpenseMasterDetails();else this.router.navigate(["/expensemaster"])})}initExpenseForm(){this.expenseMasterForm=this._fb.group({id:[0],DesignationId:["",o.kI.required],DailyAllowanceLocal:["",o.kI.required],DailyAllowanceOutStation:["",o.kI.required],TravelingAllowanceLocal:["",o.kI.required],TravelingAllowanceOutStation:["",o.kI.required]})}enableFormControl(s){1==s?(this.expenseMasterForm.get("DesignationId").enable(),this.expenseMasterForm.get("DailyAllowanceLocal").enable(),this.expenseMasterForm.get("DailyAllowanceOutStation").enable(),this.expenseMasterForm.get("TravelingAllowanceLocal").enable(),this.expenseMasterForm.get("TravelingAllowanceOutStation").enable()):(this.expenseMasterForm.get("DesignationId").disable(),this.expenseMasterForm.get("DailyAllowanceLocal").disable(),this.expenseMasterForm.get("DailyAllowanceOutStation").disable(),this.expenseMasterForm.get("TravelingAllowanceLocal").disable(),this.expenseMasterForm.get("TravelingAllowanceOutStation").disable())}loadExpenseMasterDetails(s=-1){-1==s||(this.expensemasterService.getExpenseMaster(s).pipe((0,c.K)(t=>(this.showToast("Some error has been occured","danger"),(0,p._)(()=>t)))).subscribe(t=>{t.responseData&&(this.loadedExpenseMaster=t.responseData[0],this.expenseMasterForm.patchValue({id:this.loadedExpenseMaster.id,DesignationId:this.loadedExpenseMaster.DesignationId,DailyAllowanceLocal:this.loadedExpenseMaster.DailyAllowanceLocal,DailyAllowanceOutStation:this.loadedExpenseMaster.DailyAllowanceOutStation,TravelingAllowanceLocal:this.loadedExpenseMaster.TravelingAllowanceLocal,TravelingAllowanceOutStation:this.loadedExpenseMaster.TravelingAllowanceOutStation}))}),this.enableFormControl(!1))}ChangeViewDataFlag(){this.ViewDataFlag=!1,this.enableFormControl(!0)}DeleteExpenseMaster(){const s=this.loadedExpenseMaster.id;this.alertCtrl.create({header:"Are you sure?",message:"Do you really want to delete the Expense Head ?",buttons:[{text:"Cancel",role:"cancel"},{text:"Delete",handler:()=>{this.loader.present(),this.expensemasterService.deleteExpenseMaster(s).pipe((0,c.K)(t=>(this.loader.dismiss(),this.showToast("Some error has been occured","danger"),(0,p._)(()=>t)))).subscribe(t=>{this.loader.dismiss(),t.responseData&&t.responseData.id==this.loadedExpenseMaster.id&&0==t.errCode&&(this.showToast("Expense Master  Deleted Successfully","secondary"),this.expensemasterService.resetValues(),this.fetchProductTypeList(this.expensemasterService.pageIndex,this.expensemasterService.pageSize,this.expensemasterService.searchTerm),this.router.navigate(["/expensemaster"]))})}}]}).then(t=>{t.present()})}onSubmit({value:s}){s.id?(this.loader.present(),this.expensemasterService.updateExpenseMaster(s.id,s).pipe((0,c.K)(t=>(this.loader.dismiss(),this.showToast("Some error has been occured","danger"),(0,p._)(()=>t)))).subscribe(t=>{this.loader.dismiss(),t.responseData&&t.responseData.id&&0==t.errCode&&(this.showToast("Expense Head updated Successfully","secondary"),this.expensemasterService.resetValues(),this.fetchProductTypeList(this.expensemasterService.pageIndex,this.expensemasterService.pageSize,this.expensemasterService.searchTerm),this.router.navigate(["/expensemaster"]))})):(this.loader.present(),this.expensemasterService.AddExpenseMaster(s).pipe((0,c.K)(t=>(this.loader.dismiss(),this.showToast("Some error has been occured","danger"),(0,p._)(()=>t)))).subscribe(t=>{this.loader.dismiss(),t.responseData&&t.responseData.id&&0==t.errCode&&(this.showToast("Expense Head  Added Successfully","secondary"),this.expensemasterService.resetValues(),this.fetchProductTypeList(this.expensemasterService.pageIndex,this.expensemasterService.pageSize,this.expensemasterService.searchTerm),this.router.navigate(["/expensemaster"]))}))}fetchProductTypeList(s,t,n){var l=this;return(0,h.Z)(function*(){yield l.expensemasterService.refreshExpenseMasterList(s,t,n)})()}showToast(s,t){var n=this;return(0,h.Z)(function*(){yield n.toastCtrl.create({message:s,duration:2e3,position:"top",color:t,buttons:[{text:"ok",handler:()=>{}}]}).then(l=>l.present())})()}static#e=this.\u0275fac=function(t){return new(t||r)(e.Y36(o.qu),e.Y36(u.gz),e.Y36(x.a),e.Y36(u.F0),e.Y36(m.Br),e.Y36(m.yF),e.Y36(D.D))};static#t=this.\u0275cmp=e.Xpm({type:r,selectors:[["app-expensemaster-details",8,"page"]],standalone:!0,features:[e.jDz],attrs:E,decls:31,vars:6,consts:[[3,"formGroup","ngSubmit"],[3,"translucent"],["color","primary"],["slot","start"],["defaultHref","/expensemaster"],["slot","primary",4,"ngIf"],["slot","end",3,"collapse",4,"ngIf"],[3,"fullscreen"],["no-padding",""],["size","10","size-md","10","size-lg","11","no-padding",""],["aria-label","DesignationId","interface","popover","placeholder","Select Designation","formControlName","DesignationId"],["label","Daily Allowance Local","type","number","labelPlacement","floating","formControlName","DailyAllowanceLocal"],["label","Daily Allowance out Station","type","number","labelPlacement","floating","formControlName","DailyAllowanceOutStation"],["label","Traveling Allowance Local","type","number","labelPlacement","floating","formControlName","TravelingAllowanceLocal"],["label","Traveling Allowance out Station","labelPlacement","floating","formControlName","TravelingAllowanceOutStation"],["slot","primary"],[3,"click"],["name","create-outline","slot","icon-only"],["slot","end",3,"collapse"],["type","submit"],[3,"routerLink"]],template:function(t,n){1&t&&(e.TgZ(0,"form",0),e.NdJ("ngSubmit",function(){return n.onSubmit(n.expenseMasterForm)}),e.TgZ(1,"ion-header",1)(2,"ion-toolbar",2)(3,"ion-buttons",3),e._UZ(4,"ion-back-button",4),e.qZA(),e.TgZ(5,"ion-title"),e._uU(6,"Expense Master Details"),e.qZA(),e.YNc(7,f,3,0,"ion-buttons",5),e.YNc(8,M,3,1,"ion-buttons",6),e.YNc(9,T,3,3,"ion-buttons",6),e.qZA()(),e.TgZ(10,"ion-content",7)(11,"ion-grid",8)(12,"ion-col",9)(13,"ion-item"),e._UZ(14,"ion-select",10),e.qZA()(),e.TgZ(15,"ion-row")(16,"ion-col",8)(17,"ion-item"),e._UZ(18,"ion-input",11),e.qZA()()(),e.TgZ(19,"ion-row")(20,"ion-col",8)(21,"ion-item"),e._UZ(22,"ion-input",12),e.qZA()()(),e.TgZ(23,"ion-row")(24,"ion-col",8)(25,"ion-item"),e._UZ(26,"ion-input",13),e.qZA()()(),e.TgZ(27,"ion-row")(28,"ion-col",8)(29,"ion-item"),e._UZ(30,"ion-input",14),e.qZA()()()()()()),2&t&&(e.Q6J("formGroup",n.expenseMasterForm),e.xp6(1),e.Q6J("translucent",!0),e.xp6(6),e.Q6J("ngIf",1==n.ViewDataFlag),e.xp6(1),e.Q6J("ngIf",0==n.ViewDataFlag),e.xp6(1),e.Q6J("ngIf",0==n.ViewDataFlag),e.xp6(1),e.Q6J("fullscreen",!0))},dependencies:[a.Pc,a.YG,a.Sm,a.wI,a.W2,a.jY,a.Gu,a.gu,a.pK,a.Ie,a.Nd,a.t9,a.wd,a.sr,a.as,a.QI,a.j9,a.oU,a.YI,u.rH,_.O5,o.UX,o._Y,o.JJ,o.JL,o.sg,o.u]})}return r})()}}]);