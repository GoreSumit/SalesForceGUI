"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[2714],{9982:(C,c,i)=>{i.r(c),i.d(c,{ExpenseHeadDetailsPagePage:()=>H});var u=i(5861),g=i(6814),r=i(95),h=i(209),a=i(3582),l=i(6306),p=i(8504),e=i(6689),E=i(2911),_=i(4414),m=i(2722);const f=["class","page"];function D(o,x){if(1&o){const s=e.EpF();e.TgZ(0,"ion-buttons",13)(1,"ion-button",14),e.NdJ("click",function(){e.CHM(s);const n=e.oxw();return e.KtG(n.ChangeViewDataFlag())}),e._UZ(2,"ion-icon",15),e.qZA()()}}function v(o,x){1&o&&(e.TgZ(0,"ion-buttons",16)(1,"ion-button",17),e._uU(2,"Save"),e.qZA()()),2&o&&e.Q6J("collapse",!0)}const P=function(){return["/expense-head"]};function b(o,x){1&o&&(e.TgZ(0,"ion-buttons",16)(1,"ion-button",18),e._uU(2,"Cancel"),e.qZA()()),2&o&&(e.Q6J("collapse",!0),e.xp6(1),e.Q6J("routerLink",e.DdM(2,P)))}let H=(()=>{class o{constructor(s,t,n,d,T,S,y){this._fb=s,this.activatedRoute=t,this.expenseheadService=n,this.router=d,this.alertCtrl=T,this.toastCtrl=S,this.loader=y,this.loadedExpenseHead={},this.ViewDataFlag=!1}ngOnInit(){this.initExpenseForm(),this.activatedRoute.paramMap.subscribe(s=>{if(s.has("ExpenseHeadId"))if(s.get("ExpenseHeadId")){const t=JSON.parse(s.get("ExpenseHeadId"));this.ViewDataFlag=!0,this.loadProductTypeDetails(t)}else this.loadProductTypeDetails();else this.router.navigate(["/expense-head"])})}initExpenseForm(){this.ExpenseHeadForm=this._fb.group({id:[0],typeCode:["",r.kI.required],typeName:["",r.kI.required],active:["",r.kI.required]}),this.ExpenseHeadForm.controls.active.setValue("Y")}enableFormControl(s){1==s?(this.ExpenseHeadForm.get("typeCode").enable(),this.ExpenseHeadForm.get("typeName").enable(),this.ExpenseHeadForm.get("active").enable()):(this.ExpenseHeadForm.get("typeCode").disable(),this.ExpenseHeadForm.get("typeName").disable(),this.ExpenseHeadForm.get("active").disable())}loadProductTypeDetails(s=-1){-1==s||(this.expenseheadService.getExpenseHead(s).pipe((0,l.K)(t=>(this.showToast("Some error has been occured","danger"),(0,p._)(()=>t)))).subscribe(t=>{t.responseData&&(this.loadedExpenseHead=t.responseData[0],this.ExpenseHeadForm.patchValue({id:this.loadedExpenseHead.id,typeCode:this.loadedExpenseHead.typeCode,typeName:this.loadedExpenseHead.typeName,active:this.loadedExpenseHead.active}))}),this.enableFormControl(!1))}ChangeViewDataFlag(){this.ViewDataFlag=!1,this.enableFormControl(!0)}DeleteExpenseHead(){const s=this.loadedExpenseHead.id;this.alertCtrl.create({header:"Are you sure?",message:"Do you really want to delete the Expense Head ?",buttons:[{text:"Cancel",role:"cancel"},{text:"Delete",handler:()=>{this.loader.present(),this.expenseheadService.deleteExpenseHead(s).pipe((0,l.K)(t=>(this.loader.dismiss(),this.showToast("Some error has been occured","danger"),(0,p._)(()=>t)))).subscribe(t=>{this.loader.dismiss(),t.responseData&&t.responseData.id==this.loadedExpenseHead.id&&0==t.errCode&&(this.showToast("Expense Head  Deleted Successfully","secondary"),this.expenseheadService.resetValues(),this.fetchProductTypeList(this.expenseheadService.pageIndex,this.expenseheadService.pageSize,this.expenseheadService.searchTerm),this.router.navigate(["/expense-head"]))})}}]}).then(t=>{t.present()})}onSubmit({value:s}){s.id?(this.loader.present(),this.expenseheadService.updateExpenseHead(s.id,s).pipe((0,l.K)(t=>(this.loader.dismiss(),this.showToast("Some error has been occured","danger"),(0,p._)(()=>t)))).subscribe(t=>{this.loader.dismiss(),t.responseData&&t.responseData.id&&0==t.errCode&&(this.showToast("Expense Head updated Successfully","secondary"),this.expenseheadService.resetValues(),this.fetchProductTypeList(this.expenseheadService.pageIndex,this.expenseheadService.pageSize,this.expenseheadService.searchTerm),this.router.navigate(["/expense-head"]))})):(this.loader.present(),this.expenseheadService.AddExpenseHead(s).pipe((0,l.K)(t=>(this.loader.dismiss(),this.showToast("Some error has been occured","danger"),(0,p._)(()=>t)))).subscribe(t=>{this.loader.dismiss(),t.responseData&&t.responseData.id&&0==t.errCode&&(this.showToast("Expense Head  Added Successfully","secondary"),this.expenseheadService.resetValues(),this.fetchProductTypeList(this.expenseheadService.pageIndex,this.expenseheadService.pageSize,this.expenseheadService.searchTerm),this.router.navigate(["/expense-head"]))}))}fetchProductTypeList(s,t,n){var d=this;return(0,u.Z)(function*(){yield d.expenseheadService.refreshexpenseheadList(s,t,n)})()}showToast(s,t){var n=this;return(0,u.Z)(function*(){yield n.toastCtrl.create({message:s,duration:2e3,position:"top",color:t,buttons:[{text:"ok",handler:()=>{}}]}).then(d=>d.present())})()}static#e=this.\u0275fac=function(t){return new(t||o)(e.Y36(r.qu),e.Y36(h.gz),e.Y36(E.l),e.Y36(h.F0),e.Y36(_.Br),e.Y36(_.yF),e.Y36(m.D))};static#t=this.\u0275cmp=e.Xpm({type:o,selectors:[["app-expense-head-details",8,"page"]],standalone:!0,features:[e.jDz],attrs:f,decls:24,vars:6,consts:[[3,"formGroup","ngSubmit"],[3,"translucent"],["color","primary"],["slot","start"],["defaultHref","/expense-head"],["slot","primary",4,"ngIf"],["slot","end",3,"collapse",4,"ngIf"],[3,"fullscreen"],["no-padding",""],["id","ionInputTypeName","label","Expense Head Name","labelPlacement","floating","formControlName","typeName"],["aria-label","Active","interface","popover","value","Y","placeholder","Active","formControlName","active"],["value","Y"],["value","N"],["slot","primary"],[3,"click"],["name","create-outline","slot","icon-only"],["slot","end",3,"collapse"],["type","submit"],[3,"routerLink"]],template:function(t,n){1&t&&(e.TgZ(0,"form",0),e.NdJ("ngSubmit",function(){return n.onSubmit(n.ExpenseHeadForm)}),e.TgZ(1,"ion-header",1)(2,"ion-toolbar",2)(3,"ion-buttons",3),e._UZ(4,"ion-back-button",4),e.qZA(),e.TgZ(5,"ion-title"),e._uU(6,"Expense Head Details"),e.qZA(),e.YNc(7,D,3,0,"ion-buttons",5),e.YNc(8,v,3,1,"ion-buttons",6),e.YNc(9,b,3,3,"ion-buttons",6),e.qZA()(),e.TgZ(10,"ion-content",7)(11,"ion-grid",8)(12,"ion-row")(13,"ion-col",8)(14,"ion-item"),e._UZ(15,"ion-input",9),e.qZA()()(),e.TgZ(16,"ion-row")(17,"ion-col",8)(18,"ion-item")(19,"ion-select",10)(20,"ion-select-option",11),e._uU(21,"Yes"),e.qZA(),e.TgZ(22,"ion-select-option",12),e._uU(23,"No"),e.qZA()()()()()()()()),2&t&&(e.Q6J("formGroup",n.ExpenseHeadForm),e.xp6(1),e.Q6J("translucent",!0),e.xp6(6),e.Q6J("ngIf",1==n.ViewDataFlag),e.xp6(1),e.Q6J("ngIf",0==n.ViewDataFlag),e.xp6(1),e.Q6J("ngIf",0==n.ViewDataFlag),e.xp6(1),e.Q6J("fullscreen",!0))},dependencies:[a.Pc,a.YG,a.Sm,a.wI,a.W2,a.jY,a.Gu,a.gu,a.pK,a.Ie,a.Nd,a.t9,a.n0,a.wd,a.sr,a.QI,a.j9,a.oU,a.YI,h.rH,g.O5,r.UX,r._Y,r.JJ,r.JL,r.sg,r.u]})}return o})()}}]);