"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[4889],{4889:(I,d,o)=>{o.r(d),o.d(d,{LevelDetailPage:()=>C});var h=o(5861),g=o(6814),a=o(95),u=o(209),s=o(3582),v=o(6306),c=o(8504),e=o(6689),p=o(3117),_=o(4414),f=o(2722);function D(r,m){if(1&r){const l=e.EpF();e.TgZ(0,"ion-buttons",11)(1,"ion-button",12),e.NdJ("click",function(){e.CHM(l);const i=e.oxw();return e.KtG(i.ChangeViewDataFlag())}),e._UZ(2,"ion-icon",13),e.qZA()()}}function L(r,m){1&r&&(e.TgZ(0,"ion-buttons",14)(1,"ion-button",15),e._uU(2,"Save"),e.qZA()()),2&r&&e.Q6J("collapse",!0)}const b=function(){return["/level"]};function S(r,m){1&r&&(e.TgZ(0,"ion-buttons",14)(1,"ion-button",16),e._uU(2,"Cancel"),e.qZA()()),2&r&&(e.Q6J("collapse",!0),e.xp6(1),e.Q6J("routerLink",e.DdM(2,b)))}let C=(()=>{class r{constructor(l,t,i,n,E,T,P){this.activatedRoute=l,this.levelService=t,this.router=i,this._fb=n,this.alertCtrl=E,this.toastCtrl=T,this.loader=P,this.loadedLevel={},this.ViewDataFlag=!1}ngOnInit(){this.initLevelForm(),this.activatedRoute.paramMap.subscribe(l=>{if(l.has("levelId"))if(l.get("levelId")){const t=JSON.parse(l.get("levelId"));this.ViewDataFlag=!0,this.loadLevelDetails(t)}else this.loadLevelDetails();else this.router.navigate(["/level"])})}initLevelForm(){this.levelForm=this._fb.group({id:[0],levelCode:["",a.kI.required],levelName:["",a.kI.required]})}enableFormControl(l){1==l?(this.levelForm.get("levelCode").enable(),this.levelForm.get("levelName").enable()):(this.levelForm.get("levelCode").disable(),this.levelForm.get("levelName").disable())}loadLevelDetails(l=-1){-1==l||(this.levelService.getLevel(l).pipe((0,v.K)(t=>(this.showToast("Some error has been occured","danger"),(0,c._)(()=>t)))).subscribe(t=>{t.responseData&&(this.loadedLevel=t.responseData[0],this.levelForm.patchValue({id:this.loadedLevel.id,levelCode:this.loadedLevel.levelCode,levelName:this.loadedLevel.levelName}))}),this.enableFormControl(!1))}ChangeViewDataFlag(){this.ViewDataFlag=!1,this.enableFormControl(!0)}DeleteLevel(){const l=this.loadedLevel.id;this.alertCtrl.create({header:"Are you sure?",message:"Do you really want to delete the Level?",buttons:[{text:"Cancel",role:"cancel"},{text:"Delete",handler:()=>{this.loader.present(),this.levelService.deleteLevel(l).pipe((0,v.K)(t=>(this.loader.dismiss(),this.showToast("Some error has been occured","danger"),(0,c._)(()=>t)))).subscribe(t=>{this.loader.dismiss(),t.responseData&&t.responseData.id==this.loadedLevel.id&&0==t.errCode&&(this.showToast("Level Deleted Successfully","secondary"),this.levelService.resetValues(),this.fetchLevelList(this.levelService.pageIndex,this.levelService.pageSize,this.levelService.searchTerm),this.router.navigate(["/level"]))})}}]}).then(t=>{t.present()})}onSubmit({value:l}){l.id?(this.loader.present(),this.levelService.updateLevel(l.id,l).pipe((0,v.K)(t=>(this.loader.dismiss(),this.showToast("Some error has been occured","danger"),(0,c._)(()=>t)))).subscribe(t=>{this.loader.dismiss(),t.responseData&&t.responseData.id&&0==t.errCode&&(this.showToast("Level updated Successfully","secondary"),this.levelService.resetValues(),this.fetchLevelList(this.levelService.pageIndex,this.levelService.pageSize,this.levelService.searchTerm),this.router.navigate(["/level"]))})):(this.loader.present(),this.levelService.AddLevel(l).pipe((0,v.K)(t=>(this.loader.dismiss(),this.showToast("Some error has been occured","danger"),(0,c._)(()=>t)))).subscribe(t=>{this.loader.dismiss(),t.responseData&&t.responseData.id&&0==t.errCode&&(this.showToast("Level Added Successfully","secondary"),this.levelService.resetValues(),this.fetchLevelList(this.levelService.pageIndex,this.levelService.pageSize,this.levelService.searchTerm),this.router.navigate(["/level"]))}))}fetchLevelList(l,t,i){var n=this;return(0,h.Z)(function*(){yield n.levelService.refreshLevelList(l,t,i),n.levelService.pageIndex+=1})()}showToast(l,t){var i=this;return(0,h.Z)(function*(){yield i.toastCtrl.create({message:l,duration:2e3,position:"top",color:t,buttons:[{text:"ok",handler:()=>{}}]}).then(n=>n.present())})()}static#e=this.\u0275fac=function(t){return new(t||r)(e.Y36(u.gz),e.Y36(p.r),e.Y36(u.F0),e.Y36(a.qu),e.Y36(_.Br),e.Y36(_.yF),e.Y36(f.D))};static#t=this.\u0275cmp=e.Xpm({type:r,selectors:[["app-level-detail"]],standalone:!0,features:[e.jDz],decls:20,vars:6,consts:[[3,"formGroup","ngSubmit"],[3,"translucent"],["color","primary"],["slot","start"],["defaultHref","/level"],["slot","primary",4,"ngIf"],["slot","end",3,"collapse",4,"ngIf"],[3,"fullscreen"],["no-padding",""],["label","Level Code","labelPlacement","floating","formControlName","levelCode"],["label","Level Name","labelPlacement","floating","formControlName","levelName"],["slot","primary"],[3,"click"],["name","create-outline","slot","icon-only"],["slot","end",3,"collapse"],["type","submit"],[3,"routerLink"]],template:function(t,i){1&t&&(e.TgZ(0,"form",0),e.NdJ("ngSubmit",function(){return i.onSubmit(i.levelForm)}),e.TgZ(1,"ion-header",1)(2,"ion-toolbar",2)(3,"ion-buttons",3),e._UZ(4,"ion-back-button",4),e.qZA(),e.TgZ(5,"ion-title"),e._uU(6,"Level Details"),e.qZA(),e.YNc(7,D,3,0,"ion-buttons",5),e.YNc(8,L,3,1,"ion-buttons",6),e.YNc(9,S,3,3,"ion-buttons",6),e.qZA()(),e.TgZ(10,"ion-content",7)(11,"ion-grid",8)(12,"ion-row")(13,"ion-col",8)(14,"ion-item"),e._UZ(15,"ion-input",9),e.qZA()()(),e.TgZ(16,"ion-row")(17,"ion-col",8)(18,"ion-item"),e._UZ(19,"ion-input",10),e.qZA()()()()()()),2&t&&(e.Q6J("formGroup",i.levelForm),e.xp6(1),e.Q6J("translucent",!0),e.xp6(6),e.Q6J("ngIf",1==i.ViewDataFlag),e.xp6(1),e.Q6J("ngIf",0==i.ViewDataFlag),e.xp6(1),e.Q6J("ngIf",0==i.ViewDataFlag),e.xp6(1),e.Q6J("fullscreen",!0))},dependencies:[s.Pc,s.YG,s.Sm,s.wI,s.W2,s.jY,s.Gu,s.gu,s.pK,s.Ie,s.Nd,s.wd,s.sr,s.j9,s.oU,s.YI,u.rH,g.O5,a.UX,a._Y,a.JJ,a.JL,a.sg,a.u]})}return r})()}}]);