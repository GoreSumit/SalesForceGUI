"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[3864],{3864:(F,y,a)=>{a.r(y),a.d(y,{TerritoryDetailPage:()=>I});var _=a(5861),g=a(6814),n=a(95),h=a(209),i=a(3582),c=a(6306),u=a(8504),e=a(6689),p=a(9930),m=a(4414),T=a(2722);function f(o,d){if(1&o){const t=e.EpF();e.TgZ(0,"ion-buttons",15)(1,"ion-button",16),e.NdJ("click",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.ChangeViewDataFlag())}),e._UZ(2,"ion-icon",17),e.qZA()()}}function v(o,d){1&o&&(e.TgZ(0,"ion-buttons",18)(1,"ion-button",19),e._uU(2,"Save"),e.qZA()()),2&o&&e.Q6J("collapse",!0)}const D=function(){return["/territory"]};function b(o,d){1&o&&(e.TgZ(0,"ion-buttons",18)(1,"ion-button",20),e._uU(2,"Cancel"),e.qZA()()),2&o&&(e.Q6J("collapse",!0),e.xp6(1),e.Q6J("routerLink",e.DdM(2,D)))}function S(o,d){if(1&o&&(e.TgZ(0,"ion-select-option",21),e._uU(1),e.qZA()),2&o){const t=d.$implicit;e.Q6J("value",t.id),e.xp6(1),e.hij(" ",t.areaCode," ")}}let I=(()=>{class o{constructor(t,r,s,l,E,C,P){this.activatedRoute=t,this.territoryService=r,this.router=s,this._fb=l,this.alertCtrl=E,this.toastCtrl=C,this.loader=P,this.loadedTerritory={},this.ViewDataFlag=!1}ngOnInit(){this.initregionForm(),this.activatedRoute.paramMap.subscribe(t=>{if(t.has("territoryId"))if(t.get("territoryId")){const r=JSON.parse(t.get("territoryId"));this.ViewDataFlag=!0,this.loadTerritoryDetails(r)}else this.loadTerritoryDetails();else this.router.navigate(["/territory"])})}initregionForm(){this.territoryForm=this._fb.group({id:[0],territoryName:["",n.kI.required],areaId:["",n.kI.required],active:["",n.kI.required]}),this.territoryForm.controls.active.setValue("Y"),this.territoryService.getAreaList()}enableFormControl(t){1==t?(this.territoryForm.get("territoryName").enable(),this.territoryForm.get("areaId").enable(),this.territoryForm.get("active").enable()):(this.territoryForm.get("territoryName").disable(),this.territoryForm.get("areaId").disable(),this.territoryForm.get("active").disable())}loadTerritoryDetails(t=-1){-1==t||(this.territoryService.getTerritory(t).pipe((0,c.K)(r=>(this.showToast("Some error has been occured","danger"),(0,u._)(()=>r)))).subscribe(r=>{r.responseData&&(this.loadedTerritory=r.responseData[0],this.territoryForm.patchValue({id:this.loadedTerritory.id,territoryName:this.loadedTerritory.territoryName,areaId:this.loadedTerritory.areaId,active:this.loadedTerritory.active}))}),this.enableFormControl(!1))}ChangeViewDataFlag(){this.ViewDataFlag=!1,this.enableFormControl(!0)}DeleteTerritory(){const t=this.loadedTerritory.id;this.alertCtrl.create({header:"Are you sure?",message:"Do you really want to delete the Territory?",buttons:[{text:"Cancel",role:"cancel"},{text:"Delete",handler:()=>{this.loader.present(),this.territoryService.deleteTerritory(t).pipe((0,c.K)(r=>(this.loader.dismiss(),this.showToast("Some error has been occured","danger"),(0,u._)(()=>r)))).subscribe(r=>{this.loader.dismiss(),r.responseData&&r.responseData.id==this.loadedTerritory.id&&0==r.errCode&&(this.showToast("Territory Deleted Successfully","secondary"),this.territoryService.resetValues(),this.fetchTerritoryList(this.territoryService.pageIndex,this.territoryService.pageSize,this.territoryService.searchTerm),this.router.navigate(["/territory"]))})}}]}).then(r=>{r.present()})}onSubmit({value:t}){t.id?(this.loader.present(),this.territoryService.updateTerritory(t.id,t).pipe((0,c.K)(r=>(this.loader.dismiss(),this.showToast("Some error has been occured","danger"),(0,u._)(()=>r)))).subscribe(r=>{this.loader.dismiss(),r.responseData&&r.responseData.id&&0==r.errCode&&(this.showToast("Territory updated Successfully","secondary"),this.territoryService.resetValues(),this.fetchTerritoryList(this.territoryService.pageIndex,this.territoryService.pageSize,this.territoryService.searchTerm),this.router.navigate(["/territory"]))})):(this.loader.present(),this.territoryService.AddTerritory(t).pipe((0,c.K)(r=>(this.loader.dismiss(),this.showToast("Some error has been occured","danger"),(0,u._)(()=>r)))).subscribe(r=>{this.loader.dismiss(),r.responseData&&r.responseData.id&&0==r.errCode&&(this.showToast("Territory Added Successfully","secondary"),this.territoryService.resetValues(),this.fetchTerritoryList(this.territoryService.pageIndex,this.territoryService.pageSize,this.territoryService.searchTerm),this.router.navigate(["/territory"]))}))}fetchTerritoryList(t,r,s){var l=this;return(0,_.Z)(function*(){yield l.territoryService.refreshTerritoryList(t,r,s),l.territoryService.pageIndex+=1})()}showToast(t,r){var s=this;return(0,_.Z)(function*(){yield s.toastCtrl.create({message:t,duration:2e3,position:"top",color:r,buttons:[{text:"ok",handler:()=>{}}]}).then(l=>l.present())})()}static#e=this.\u0275fac=function(r){return new(r||o)(e.Y36(h.gz),e.Y36(p.j),e.Y36(h.F0),e.Y36(n.qu),e.Y36(m.Br),e.Y36(m.yF),e.Y36(T.D))};static#r=this.\u0275cmp=e.Xpm({type:o,selectors:[["app-territory-detail"]],standalone:!0,features:[e.jDz],decls:29,vars:7,consts:[[3,"formGroup","ngSubmit"],[3,"translucent"],["color","primary"],["slot","start"],["defaultHref","/territory"],["slot","primary",4,"ngIf"],["slot","end",3,"collapse",4,"ngIf"],[3,"fullscreen"],["no-padding",""],["label","Territory Name","labelPlacement","floating","formControlName","territoryName"],["aria-label","Active","interface","popover","placeholder","Area Id","formControlName","areaId"],[3,"value",4,"ngFor","ngForOf"],["aria-label","Active","interface","popover","placeholder","Active","formControlName","active"],["value","Y"],["value","N"],["slot","primary"],[3,"click"],["name","create-outline","slot","icon-only"],["slot","end",3,"collapse"],["type","submit"],[3,"routerLink"],[3,"value"]],template:function(r,s){1&r&&(e.TgZ(0,"form",0),e.NdJ("ngSubmit",function(){return s.onSubmit(s.territoryForm)}),e.TgZ(1,"ion-header",1)(2,"ion-toolbar",2)(3,"ion-buttons",3),e._UZ(4,"ion-back-button",4),e.qZA(),e.TgZ(5,"ion-title"),e._uU(6,"Territory Details"),e.qZA(),e.YNc(7,f,3,0,"ion-buttons",5),e.YNc(8,v,3,1,"ion-buttons",6),e.YNc(9,b,3,3,"ion-buttons",6),e.qZA()(),e.TgZ(10,"ion-content",7)(11,"ion-grid",8)(12,"ion-row")(13,"ion-col",8)(14,"ion-item"),e._UZ(15,"ion-input",9),e.qZA()()(),e.TgZ(16,"ion-row")(17,"ion-col",8)(18,"ion-item")(19,"ion-select",10),e.YNc(20,S,2,2,"ion-select-option",11),e.qZA()()()(),e.TgZ(21,"ion-row")(22,"ion-col",8)(23,"ion-item")(24,"ion-select",12)(25,"ion-select-option",13),e._uU(26,"Yes"),e.qZA(),e.TgZ(27,"ion-select-option",14),e._uU(28,"No"),e.qZA()()()()()()()()),2&r&&(e.Q6J("formGroup",s.territoryForm),e.xp6(1),e.Q6J("translucent",!0),e.xp6(6),e.Q6J("ngIf",1==s.ViewDataFlag),e.xp6(1),e.Q6J("ngIf",0==s.ViewDataFlag),e.xp6(1),e.Q6J("ngIf",0==s.ViewDataFlag),e.xp6(1),e.Q6J("fullscreen",!0),e.xp6(10),e.Q6J("ngForOf",s.territoryService.areaList))},dependencies:[i.Pc,i.YG,i.Sm,i.wI,i.W2,i.jY,i.Gu,i.gu,i.pK,i.Ie,i.Nd,i.t9,i.n0,i.wd,i.sr,i.QI,i.j9,i.oU,i.YI,h.rH,g.ax,g.O5,n.UX,n._Y,n.JJ,n.JL,n.sg,n.u]})}return o})()}}]);