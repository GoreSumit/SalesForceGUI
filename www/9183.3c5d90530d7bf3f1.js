"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[9183],{9183:(F,h,s)=>{s.r(h),s.d(h,{RegionDetailPage:()=>I});var _=s(5861),m=s(6814),a=s(95),d=s(209),t=s(3582),g=s(6306),c=s(8504),e=s(6689),f=s(6882),p=s(4414),v=s(2722);function D(n,u){if(1&n){const o=e.EpF();e.TgZ(0,"ion-buttons",15)(1,"ion-button",16),e.NdJ("click",function(){e.CHM(o);const r=e.oxw();return e.KtG(r.ChangeViewDataFlag())}),e._UZ(2,"ion-icon",17),e.qZA()()}}function R(n,u){1&n&&(e.TgZ(0,"ion-buttons",18)(1,"ion-button",19),e._uU(2,"Save"),e.qZA()()),2&n&&e.Q6J("collapse",!0)}const b=function(){return["/region"]};function S(n,u){1&n&&(e.TgZ(0,"ion-buttons",18)(1,"ion-button",20),e._uU(2,"Cancel"),e.qZA()()),2&n&&(e.Q6J("collapse",!0),e.xp6(1),e.Q6J("routerLink",e.DdM(2,b)))}function T(n,u){if(1&n&&(e.TgZ(0,"ion-select-option",21),e._uU(1),e.qZA()),2&n){const o=u.$implicit;e.Q6J("value",o.id),e.xp6(1),e.hij(" ",o.zoneCode," ")}}let I=(()=>{class n{constructor(o,i,r,l,E,C,P){this.activatedRoute=o,this.regionService=i,this.router=r,this._fb=l,this.alertCtrl=E,this.toastCtrl=C,this.loader=P,this.loadedRegion={},this.ViewDataFlag=!1}ngOnInit(){this.initregionForm(),this.activatedRoute.paramMap.subscribe(o=>{if(o.has("regionId"))if(o.get("regionId")){const i=JSON.parse(o.get("regionId"));this.ViewDataFlag=!0,this.loadRegionDetails(i)}else this.loadRegionDetails();else this.router.navigate(["/region"])})}initregionForm(){this.regionForm=this._fb.group({id:[0],regionName:["",a.kI.required],zoneId:["",a.kI.required],active:["",a.kI.required]}),this.regionForm.controls.active.setValue("Y"),this.regionService.getZoneList()}enableFormControl(o){1==o?(this.regionForm.get("regionName").enable(),this.regionForm.get("zoneId").enable(),this.regionForm.get("active").enable()):(this.regionForm.get("regionName").disable(),this.regionForm.get("zoneId").disable(),this.regionForm.get("active").disable())}loadRegionDetails(o=-1){-1==o||(this.regionService.getRegion(o).pipe((0,g.K)(i=>(this.showToast("Some error has been occured","danger"),(0,c._)(()=>i)))).subscribe(i=>{i.responseData&&(this.loadedRegion=i.responseData[0],this.regionForm.patchValue({id:this.loadedRegion.id,regionName:this.loadedRegion.regionName,zoneId:this.loadedRegion.zoneId,active:this.loadedRegion.active}))}),this.enableFormControl(!1))}ChangeViewDataFlag(){this.ViewDataFlag=!1,this.enableFormControl(!0)}DeleteRegion(){const o=this.loadedRegion.id;this.alertCtrl.create({header:"Are you sure?",message:"Do you really want to delete the Reigon?",buttons:[{text:"Cancel",role:"cancel"},{text:"Delete",handler:()=>{this.loader.present(),this.regionService.deleteRegion(o).pipe((0,g.K)(i=>(this.loader.dismiss(),this.showToast("Some error has been occured","danger"),(0,c._)(()=>i)))).subscribe(i=>{this.loader.dismiss(),i.responseData&&i.responseData.id==this.loadedRegion.id&&0==i.errCode&&(this.showToast("Region Deleted Successfully","secondary"),this.regionService.resetValues(),this.fetchRegionList(this.regionService.pageIndex,this.regionService.pageSize,this.regionService.searchTerm),this.router.navigate(["/region"]))})}}]}).then(i=>{i.present()})}onSubmit({value:o}){o.id?(this.loader.present(),this.regionService.updateRegion(o.id,o).pipe((0,g.K)(i=>(this.loader.dismiss(),this.showToast("Some error has been occured","danger"),(0,c._)(()=>i)))).subscribe(i=>{this.loader.dismiss(),i.responseData&&i.responseData.id&&0==i.errCode&&(this.showToast("Region updated Successfully","secondary"),this.regionService.resetValues(),this.fetchRegionList(this.regionService.pageIndex,this.regionService.pageSize,this.regionService.searchTerm),this.router.navigate(["/region"]))})):(this.loader.present(),this.regionService.AddRegion(o).pipe((0,g.K)(i=>(this.loader.dismiss(),this.showToast("Some error has been occured","danger"),(0,c._)(()=>i)))).subscribe(i=>{this.loader.dismiss(),i.responseData&&i.responseData.id&&0==i.errCode&&(this.showToast("Region Added Successfully","secondary"),this.regionService.resetValues(),this.fetchRegionList(this.regionService.pageIndex,this.regionService.pageSize,this.regionService.searchTerm),this.router.navigate(["/region"]))}))}fetchRegionList(o,i,r){var l=this;return(0,_.Z)(function*(){yield l.regionService.refreshRegionList(o,i,r),l.regionService.pageIndex+=1})()}showToast(o,i){var r=this;return(0,_.Z)(function*(){yield r.toastCtrl.create({message:o,duration:2e3,position:"top",color:i,buttons:[{text:"ok",handler:()=>{}}]}).then(l=>l.present())})()}static#e=this.\u0275fac=function(i){return new(i||n)(e.Y36(d.gz),e.Y36(f.o),e.Y36(d.F0),e.Y36(a.qu),e.Y36(p.Br),e.Y36(p.yF),e.Y36(v.D))};static#i=this.\u0275cmp=e.Xpm({type:n,selectors:[["app-region-detail"]],standalone:!0,features:[e.jDz],decls:29,vars:7,consts:[[3,"formGroup","ngSubmit"],[3,"translucent"],["color","primary"],["slot","start"],["defaultHref","/region"],["slot","primary",4,"ngIf"],["slot","end",3,"collapse",4,"ngIf"],[3,"fullscreen"],["no-padding",""],["label","Region Name","labelPlacement","floating","formControlName","regionName"],["aria-label","Active","interface","popover","placeholder","Zone Id","formControlName","zoneId"],[3,"value",4,"ngFor","ngForOf"],["aria-label","Active","interface","popover","placeholder","Active","formControlName","active"],["value","Y"],["value","N"],["slot","primary"],[3,"click"],["name","create-outline","slot","icon-only"],["slot","end",3,"collapse"],["type","submit"],[3,"routerLink"],[3,"value"]],template:function(i,r){1&i&&(e.TgZ(0,"form",0),e.NdJ("ngSubmit",function(){return r.onSubmit(r.regionForm)}),e.TgZ(1,"ion-header",1)(2,"ion-toolbar",2)(3,"ion-buttons",3),e._UZ(4,"ion-back-button",4),e.qZA(),e.TgZ(5,"ion-title"),e._uU(6,"Region Details"),e.qZA(),e.YNc(7,D,3,0,"ion-buttons",5),e.YNc(8,R,3,1,"ion-buttons",6),e.YNc(9,S,3,3,"ion-buttons",6),e.qZA()(),e.TgZ(10,"ion-content",7)(11,"ion-grid",8)(12,"ion-row")(13,"ion-col",8)(14,"ion-item"),e._UZ(15,"ion-input",9),e.qZA()()(),e.TgZ(16,"ion-row")(17,"ion-col",8)(18,"ion-item")(19,"ion-select",10),e.YNc(20,T,2,2,"ion-select-option",11),e.qZA()()()(),e.TgZ(21,"ion-row")(22,"ion-col",8)(23,"ion-item")(24,"ion-select",12)(25,"ion-select-option",13),e._uU(26,"Yes"),e.qZA(),e.TgZ(27,"ion-select-option",14),e._uU(28,"No"),e.qZA()()()()()()()()),2&i&&(e.Q6J("formGroup",r.regionForm),e.xp6(1),e.Q6J("translucent",!0),e.xp6(6),e.Q6J("ngIf",1==r.ViewDataFlag),e.xp6(1),e.Q6J("ngIf",0==r.ViewDataFlag),e.xp6(1),e.Q6J("ngIf",0==r.ViewDataFlag),e.xp6(1),e.Q6J("fullscreen",!0),e.xp6(10),e.Q6J("ngForOf",r.regionService.zoneList))},dependencies:[t.Pc,t.YG,t.Sm,t.wI,t.W2,t.jY,t.Gu,t.gu,t.pK,t.Ie,t.Nd,t.t9,t.n0,t.wd,t.sr,t.QI,t.j9,t.oU,t.YI,d.rH,m.ax,m.O5,a.UX,a._Y,a.JJ,a.JL,a.sg,a.u]})}return n})()}}]);