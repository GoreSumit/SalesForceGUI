"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[5922],{5922:(I,h,s)=>{s.r(h),s.d(h,{ZoneDetailPage:()=>C});var _=s(5861),p=s(6814),r=s(95),d=s(209),n=s(3582),c=s(6306),u=s(8504),e=s(6689),Z=s(9557),m=s(4414),f=s(2722);function z(a,g){if(1&a){const t=e.EpF();e.TgZ(0,"ion-buttons",14)(1,"ion-button",15),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.ChangeViewDataFlag())}),e._UZ(2,"ion-icon",16),e.qZA()()}}function D(a,g){1&a&&(e.TgZ(0,"ion-buttons",17)(1,"ion-button",18),e._uU(2,"Save"),e.qZA()()),2&a&&e.Q6J("collapse",!0)}const v=function(){return["/zone"]};function b(a,g){1&a&&(e.TgZ(0,"ion-buttons",17)(1,"ion-button",19),e._uU(2,"Cancel"),e.qZA()()),2&a&&(e.Q6J("collapse",!0),e.xp6(1),e.Q6J("routerLink",e.DdM(2,v)))}let C=(()=>{class a{constructor(t,o,i,l,S,T,E){this.activatedRoute=t,this.zoneService=o,this.router=i,this._fb=l,this.alertCtrl=S,this.toastCtrl=T,this.loader=E,this.loadedZone={},this.ViewDataFlag=!1}ngOnInit(){this.initZoneForm(),this.activatedRoute.paramMap.subscribe(t=>{if(t.has("zoneId"))if(t.get("zoneId")){const o=JSON.parse(t.get("zoneId"));this.ViewDataFlag=!0,this.loadZoneDetails(o)}else this.loadZoneDetails();else this.router.navigate(["/zone"])})}initZoneForm(){this.zoneForm=this._fb.group({id:[0],zoneCode:["",r.kI.required],zoneName:["",r.kI.required],active:["",r.kI.required]}),this.zoneForm.controls.active.setValue("Y")}enableFormControl(t){1==t?(this.zoneForm.get("zoneCode").enable(),this.zoneForm.get("zoneName").enable(),this.zoneForm.get("active").enable()):(this.zoneForm.get("zoneCode").disable(),this.zoneForm.get("zoneName").disable(),this.zoneForm.get("active").disable())}loadZoneDetails(t=-1){-1==t||(this.zoneService.getZone(t).pipe((0,c.K)(o=>(this.showToast("Some error has been occured","danger"),(0,u._)(()=>o)))).subscribe(o=>{o.responseData&&(this.loadedZone=o.responseData[0],this.zoneForm.patchValue({id:this.loadedZone.id,zoneCode:this.loadedZone.zoneCode,zoneName:this.loadedZone.zoneName,active:this.loadedZone.active}))}),this.enableFormControl(!1))}ChangeViewDataFlag(){this.ViewDataFlag=!1,this.enableFormControl(!0)}DeleteZone(){const t=this.loadedZone.id;this.alertCtrl.create({header:"Are you sure?",message:"Do you really want to delete the Zone?",buttons:[{text:"Cancel",role:"cancel"},{text:"Delete",handler:()=>{this.loader.present(),this.zoneService.deleteZone(t).pipe((0,c.K)(o=>(this.loader.dismiss(),this.showToast("Some error has been occured","danger"),(0,u._)(()=>o)))).subscribe(o=>{this.loader.dismiss(),o.responseData&&o.responseData.id==this.loadedZone.id&&0==o.errCode&&(this.showToast("Zone Deleted Successfully","secondary"),this.zoneService.resetValues(),this.fetchZoneList(this.zoneService.pageIndex,this.zoneService.pageSize,this.zoneService.searchTerm),this.router.navigate(["/zone"]))})}}]}).then(o=>{o.present()})}onSubmit({value:t}){t.id?(this.loader.present(),this.zoneService.updateZone(t.id,t).pipe((0,c.K)(o=>(this.loader.dismiss(),this.showToast("Some error has been occured","danger"),(0,u._)(()=>o)))).subscribe(o=>{this.loader.dismiss(),o.responseData&&o.responseData.id&&0==o.errCode&&(this.showToast("Zone updated Successfully","secondary"),this.zoneService.resetValues(),this.fetchZoneList(this.zoneService.pageIndex,this.zoneService.pageSize,this.zoneService.searchTerm),this.router.navigate(["/zone"]))})):(this.loader.present(),this.zoneService.AddZone(t).pipe((0,c.K)(o=>(this.loader.dismiss(),this.showToast("Some error has been occured","danger"),(0,u._)(()=>o)))).subscribe(o=>{this.loader.dismiss(),o.responseData&&o.responseData.id&&0==o.errCode&&(this.showToast("Zone Added Successfully","secondary"),this.zoneService.resetValues(),this.fetchZoneList(this.zoneService.pageIndex,this.zoneService.pageSize,this.zoneService.searchTerm),this.router.navigate(["/zone"]))}))}fetchZoneList(t,o,i){var l=this;return(0,_.Z)(function*(){yield l.zoneService.refreshZoneList(t,o,i),l.zoneService.pageIndex+=1})()}showToast(t,o){var i=this;return(0,_.Z)(function*(){yield i.toastCtrl.create({message:t,duration:2e3,position:"top",color:o,buttons:[{text:"ok",handler:()=>{}}]}).then(l=>l.present())})()}static#e=this.\u0275fac=function(o){return new(o||a)(e.Y36(d.gz),e.Y36(Z.b),e.Y36(d.F0),e.Y36(r.qu),e.Y36(m.Br),e.Y36(m.yF),e.Y36(f.D))};static#o=this.\u0275cmp=e.Xpm({type:a,selectors:[["app-zone-detail"]],standalone:!0,features:[e.jDz],decls:28,vars:6,consts:[[3,"formGroup","ngSubmit"],[3,"translucent"],["color","primary"],["slot","start"],["defaultHref","/zone"],["slot","primary",4,"ngIf"],["slot","end",3,"collapse",4,"ngIf"],[3,"fullscreen"],["no-padding",""],["id","ionInputZoneCode","label","Zone Code","labelPlacement","floating","formControlName","zoneCode"],["id","ionInputZoneName","label","Zone Name","labelPlacement","floating","formControlName","zoneName"],["aria-label","Active","interface","popover","placeholder","Active","formControlName","active"],["value","Y"],["value","N"],["slot","primary"],[3,"click"],["name","create-outline","slot","icon-only"],["slot","end",3,"collapse"],["type","submit"],[3,"routerLink"]],template:function(o,i){1&o&&(e.TgZ(0,"form",0),e.NdJ("ngSubmit",function(){return i.onSubmit(i.zoneForm)}),e.TgZ(1,"ion-header",1)(2,"ion-toolbar",2)(3,"ion-buttons",3),e._UZ(4,"ion-back-button",4),e.qZA(),e.TgZ(5,"ion-title"),e._uU(6,"Zone Details"),e.qZA(),e.YNc(7,z,3,0,"ion-buttons",5),e.YNc(8,D,3,1,"ion-buttons",6),e.YNc(9,b,3,3,"ion-buttons",6),e.qZA()(),e.TgZ(10,"ion-content",7)(11,"ion-grid",8)(12,"ion-row")(13,"ion-col",8)(14,"ion-item"),e._UZ(15,"ion-input",9),e.qZA()()(),e.TgZ(16,"ion-row")(17,"ion-col",8)(18,"ion-item"),e._UZ(19,"ion-input",10),e.qZA()()(),e.TgZ(20,"ion-row")(21,"ion-col",8)(22,"ion-item")(23,"ion-select",11)(24,"ion-select-option",12),e._uU(25,"Yes"),e.qZA(),e.TgZ(26,"ion-select-option",13),e._uU(27,"No"),e.qZA()()()()()()()()),2&o&&(e.Q6J("formGroup",i.zoneForm),e.xp6(1),e.Q6J("translucent",!0),e.xp6(6),e.Q6J("ngIf",1==i.ViewDataFlag),e.xp6(1),e.Q6J("ngIf",0==i.ViewDataFlag),e.xp6(1),e.Q6J("ngIf",0==i.ViewDataFlag),e.xp6(1),e.Q6J("fullscreen",!0))},dependencies:[n.Pc,n.YG,n.Sm,n.wI,n.W2,n.jY,n.Gu,n.gu,n.pK,n.Ie,n.Nd,n.t9,n.n0,n.wd,n.sr,n.QI,n.j9,n.oU,n.YI,d.rH,p.O5,r.UX,r._Y,r.JJ,r.JL,r.sg,r.u]})}return a})()}}]);