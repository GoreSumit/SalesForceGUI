"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[5221],{5221:(O,h,a)=>{a.r(h),a.d(h,{CustomerDetailPage:()=>S});var _=a(5861),p=a(6814),n=a(95),d=a(209),r=a(3582),c=a(6306),m=a(8504),e=a(6689),C=a(8010),g=a(4414),f=a(2722);function b(s,l){if(1&s){const o=e.EpF();e.TgZ(0,"ion-buttons",20)(1,"ion-button",21),e.NdJ("click",function(){e.CHM(o);const i=e.oxw();return e.KtG(i.ChangeViewDataFlag())}),e._UZ(2,"ion-icon",22),e.qZA()()}}function T(s,l){if(1&s){const o=e.EpF();e.TgZ(0,"ion-buttons",20)(1,"ion-button",21),e.NdJ("click",function(){e.CHM(o);const i=e.oxw();return e.KtG(i.DeleteCustomer())}),e._UZ(2,"ion-icon",23),e.qZA()()}}function D(s,l){1&s&&(e.TgZ(0,"ion-buttons",24)(1,"ion-button",25),e._uU(2,"Save"),e.qZA()()),2&s&&e.Q6J("collapse",!0)}const v=function(){return["/customer"]};function I(s,l){1&s&&(e.TgZ(0,"ion-buttons",24)(1,"ion-button",26),e._uU(2,"Cancel"),e.qZA()()),2&s&&(e.Q6J("collapse",!0),e.xp6(1),e.Q6J("routerLink",e.DdM(2,v)))}function A(s,l){if(1&s&&(e.TgZ(0,"ion-select-option",27),e._uU(1),e.qZA()),2&s){const o=l.$implicit;e.Q6J("value",o.id),e.xp6(1),e.hij(" ",o.customerTypeCode," ")}}function y(s,l){if(1&s&&(e.TgZ(0,"ion-select-option",27),e._uU(1),e.qZA()),2&s){const o=l.$implicit;e.Q6J("value",o.id),e.xp6(1),e.hij(" ",o.territoryCode," ")}}const F=function(){return["/billToAddress"]},Z=function(){return["/shiptoaddress"]};let S=(()=>{class s{constructor(o,t,i,u,P,E,N){this.activatedRoute=o,this.customerService=t,this.router=i,this._fb=u,this.alertCtrl=P,this.toastCtrl=E,this.loader=N,this.loadedCustomer={},this.ViewDataFlag=!1}ngOnInit(){this.initcustomerForm(),this.activatedRoute.paramMap.subscribe(o=>{if(o.has("customerId"))if(o.get("customerId")){const t=JSON.parse(o.get("customerId"));this.ViewDataFlag=!0,this.loadCustomerDetails(t)}else this.loadCustomerDetails();else this.router.navigate(["/customer"])})}initcustomerForm(){this.customerForm=this._fb.group({id:[0],customerName:["",n.kI.required],customerType:["",n.kI.required],contactNo:["",n.kI.required],emailId:["",n.kI.required],active:["0",n.kI.required],territoryID:["",n.kI.required],billToAddress:["",n.kI.required],shipToAddress:["",n.kI.required]}),this.customerForm.controls.active.setValue("Y"),this.customerService.getCustomerTypeList(),this.customerService.getTerritoryList()}enableFormControl(o){1==o?(this.customerForm.get("customerName").enable(),this.customerForm.get("customerType").enable(),this.customerForm.get("contactNo").enable(),this.customerForm.get("emailId").enable(),this.customerForm.get("active").enable(),this.customerForm.get("territoryID").enable(),this.customerForm.get("billToAddress").enable(),this.customerForm.get("shipToAddress").enable()):(this.customerForm.get("customerName").disable(),this.customerForm.get("customerType").disable(),this.customerForm.get("contactNo").disable(),this.customerForm.get("emailId").disable(),this.customerForm.get("active").disable(),this.customerForm.get("territoryID").disable(),this.customerForm.get("billToAddress").disable(),this.customerForm.get("shipToAddress").disable())}loadCustomerDetails(o=-1){-1==o||(this.customerService.getCustomer(o).pipe((0,c.K)(t=>(this.showToast("Some error has been occured","danger"),(0,m._)(()=>t)))).subscribe(t=>{t.responseData&&(this.loadedCustomer=t.responseData[0],this.customerForm.patchValue({id:this.loadedCustomer.id,customerName:this.loadedCustomer.customerName,customerType:this.loadedCustomer.customerType,contactNo:this.loadedCustomer.contactNo,active:this.loadedCustomer.active,emailId:this.loadedCustomer.emailId,territoryID:this.loadedCustomer.territoryID,billToAddress:this.loadedCustomer.billToAddress,shipToAddress:this.loadedCustomer.shipToAddress}))}),this.enableFormControl(!1))}ChangeViewDataFlag(){this.ViewDataFlag=!1,this.enableFormControl(!0)}DeleteCustomer(){const o=this.loadedCustomer.id;this.alertCtrl.create({header:"Are you sure?",message:"Do you really want to delete the Customer?",buttons:[{text:"Cancel",role:"cancel"},{text:"Delete",handler:()=>{this.loader.present(),this.customerService.deleteCustomer(o).pipe((0,c.K)(t=>(this.loader.dismiss(),this.showToast("Some error has been occured","danger"),(0,m._)(()=>t)))).subscribe(t=>{this.loader.dismiss(),t.responseData&&t.responseData.id==this.loadedCustomer.id&&0==t.errCode&&(this.showToast("Customer Deleted Successfully","secondary"),this.customerService.resetValues(),this.fetchCustomerList(this.customerService.pageIndex,this.customerService.pageSize,this.customerService.searchTerm),this.router.navigate(["/customer"]))})}}]}).then(t=>{t.present()})}onSubmit({value:o}){o.id?(this.loader.present(),this.customerService.updateCustomer(o.id,o).pipe((0,c.K)(t=>(this.loader.dismiss(),this.showToast("Some error has been occured","danger"),(0,m._)(()=>t)))).subscribe(t=>{this.loader.dismiss(),t.responseData&&t.responseData.id&&0==t.errCode&&(this.showToast("Customer updated Successfully","secondary"),this.customerService.resetValues(),this.fetchCustomerList(this.customerService.pageIndex,this.customerService.pageSize,this.customerService.searchTerm),this.router.navigate(["/customer"]))})):(this.loader.present(),this.customerService.AddCustomer(o).pipe((0,c.K)(t=>(this.loader.dismiss(),this.showToast("Some error has been occured","danger"),(0,m._)(()=>t)))).subscribe(t=>{this.loader.dismiss(),t.responseData&&t.responseData.id&&0==t.errCode&&(this.showToast("Customer Added Successfully","secondary"),this.customerService.resetValues(),this.fetchCustomerList(this.customerService.pageIndex,this.customerService.pageSize,this.customerService.searchTerm),this.router.navigate(["/customer"]))}))}fetchCustomerList(o,t,i){var u=this;return(0,_.Z)(function*(){yield u.customerService.refreshCustomerList(o,t,i),u.customerService.pageIndex+=1})()}showToast(o,t){var i=this;return(0,_.Z)(function*(){yield i.toastCtrl.create({message:o,duration:2e3,position:"top",color:t,buttons:[{text:"ok",handler:()=>{}}]}).then(u=>u.present())})()}static#e=this.\u0275fac=function(t){return new(t||s)(e.Y36(d.gz),e.Y36(C.v),e.Y36(d.F0),e.Y36(n.qu),e.Y36(g.Br),e.Y36(g.yF),e.Y36(f.D))};static#t=this.\u0275cmp=e.Xpm({type:s,selectors:[["app-customer-detail"]],standalone:!0,features:[e.jDz],decls:51,vars:13,consts:[[3,"formGroup","ngSubmit"],[3,"translucent"],["color","primary"],["slot","start"],["defaultHref","/customer"],["slot","primary",4,"ngIf"],["slot","end",3,"collapse",4,"ngIf"],[3,"fullscreen"],["no-padding",""],["label","Cutomer Name","labelPlacement","floating","formControlName","customerName"],["aria-label","Customer Type","interface","popover","placeholder","Customer Type","formControlName","customerType"],[3,"value",4,"ngFor","ngForOf"],["label","Mobile No","type","number","maxlength","10","labelPlacement","floating","formControlName","contactNo"],["label","Email Id","labelPlacement","floating","formControlName","emailId"],["aria-label","Active","interface","popover","placeholder","Active","formControlName","active"],["value","Y"],["value","N"],["aria-label","Territory Id","interface","popover","placeholder","Territory Id","formControlName","territoryID"],["label","Bill To Address","labelPlacement","floating","formControlName","billToAddress",3,"routerLink"],["label","Ship To Address","labelPlacement","floating","formControlName","shipToAddress",3,"routerLink"],["slot","primary"],[3,"click"],["name","create-outline","slot","icon-only"],["name","trash-outline","slot","icon-only"],["slot","end",3,"collapse"],["type","submit"],[3,"routerLink"],[3,"value"]],template:function(t,i){1&t&&(e.TgZ(0,"form",0),e.NdJ("ngSubmit",function(){return i.onSubmit(i.customerForm)}),e.TgZ(1,"ion-header",1)(2,"ion-toolbar",2)(3,"ion-buttons",3),e._UZ(4,"ion-back-button",4),e.qZA(),e.TgZ(5,"ion-title"),e._uU(6,"Cutomer Details"),e.qZA(),e.YNc(7,b,3,0,"ion-buttons",5),e.YNc(8,T,3,0,"ion-buttons",5),e.YNc(9,D,3,1,"ion-buttons",6),e.YNc(10,I,3,3,"ion-buttons",6),e.qZA()(),e.TgZ(11,"ion-content",7)(12,"ion-grid",8)(13,"ion-row")(14,"ion-col",8)(15,"ion-item"),e._UZ(16,"ion-input",9),e.qZA()()(),e.TgZ(17,"ion-row")(18,"ion-col",8)(19,"ion-item")(20,"ion-select",10),e.YNc(21,A,2,2,"ion-select-option",11),e.qZA()()()(),e.TgZ(22,"ion-row")(23,"ion-col",8)(24,"ion-item"),e._UZ(25,"ion-input",12),e.qZA()()(),e.TgZ(26,"ion-row")(27,"ion-col",8)(28,"ion-item"),e._UZ(29,"ion-input",13),e.qZA()()(),e.TgZ(30,"ion-row")(31,"ion-col",8)(32,"ion-item")(33,"ion-select",14)(34,"ion-select-option",15),e._uU(35,"Yes"),e.qZA(),e.TgZ(36,"ion-select-option",16),e._uU(37,"No"),e.qZA()()()()(),e.TgZ(38,"ion-row")(39,"ion-col",8)(40,"ion-item")(41,"ion-select",17),e.YNc(42,y,2,2,"ion-select-option",11),e.qZA()()()(),e.TgZ(43,"ion-row")(44,"ion-col",8)(45,"ion-item"),e._UZ(46,"ion-input",18),e.qZA()()(),e.TgZ(47,"ion-row")(48,"ion-col",8)(49,"ion-item"),e._UZ(50,"ion-input",19),e.qZA()()()()()()),2&t&&(e.Q6J("formGroup",i.customerForm),e.xp6(1),e.Q6J("translucent",!0),e.xp6(6),e.Q6J("ngIf",1==i.ViewDataFlag),e.xp6(1),e.Q6J("ngIf",1==i.ViewDataFlag),e.xp6(1),e.Q6J("ngIf",0==i.ViewDataFlag),e.xp6(1),e.Q6J("ngIf",0==i.ViewDataFlag),e.xp6(1),e.Q6J("fullscreen",!0),e.xp6(10),e.Q6J("ngForOf",i.customerService.customerTypeList),e.xp6(21),e.Q6J("ngForOf",i.customerService.territoryList),e.xp6(4),e.Q6J("routerLink",e.DdM(11,F)),e.xp6(4),e.Q6J("routerLink",e.DdM(12,Z)))},dependencies:[r.Pc,r.YG,r.Sm,r.wI,r.W2,r.jY,r.Gu,r.gu,r.pK,r.Ie,r.Nd,r.t9,r.n0,r.wd,r.sr,r.as,r.QI,r.j9,r.oU,r.YI,d.rH,p.ax,p.O5,n.UX,n._Y,n.JJ,n.JL,n.nD,n.sg,n.u]})}return s})()}}]);