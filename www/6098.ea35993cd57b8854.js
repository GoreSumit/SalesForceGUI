"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[6098],{6098:(F,h,a)=>{a.r(h),a.d(h,{ProductDetailPage:()=>I});var _=a(5861),p=a(209),m=a(6814),r=a(3582),d=a(6306),u=a(8504),n=a(95),t=a(6689),P=a(6077),g=a(4414),f=a(2722);function v(i,l){if(1&i){const o=t.EpF();t.TgZ(0,"ion-buttons",17)(1,"ion-button",18),t.NdJ("click",function(){t.CHM(o);const s=t.oxw();return t.KtG(s.ChangeViewDataFlag())}),t._UZ(2,"ion-icon",19),t.qZA()()}}function D(i,l){1&i&&(t.TgZ(0,"ion-buttons",20)(1,"ion-button",21),t._uU(2,"Save"),t.qZA()()),2&i&&t.Q6J("collapse",!0)}const b=function(){return["/products"]};function S(i,l){1&i&&(t.TgZ(0,"ion-buttons",20)(1,"ion-button",22),t._uU(2,"Cancel"),t.qZA()()),2&i&&(t.Q6J("collapse",!0),t.xp6(1),t.Q6J("routerLink",t.DdM(2,b)))}function T(i,l){if(1&i&&(t.TgZ(0,"ion-select-option",23),t._uU(1),t.qZA()),2&i){const o=l.$implicit;t.Q6J("value",o.id),t.xp6(1),t.hij(" ",o.productCode," ")}}let I=(()=>{class i{constructor(o,e,s,c,C,E,y){this.activatedRoute=o,this.productService=e,this.router=s,this._fb=c,this.alertCtrl=C,this.toastCtrl=E,this.loader=y,this.loadedProduct={},this.ViewDataFlag=!1}ngOnInit(){this.initProductForm(),this.activatedRoute.paramMap.subscribe(o=>{if(o.has("productId"))if(o.get("productId")){const e=JSON.parse(o.get("productId"));this.ViewDataFlag=!0,this.loadProductDetails(e)}else this.loadProductDetails();else this.router.navigate(["/products"])})}initProductForm(){this.productForm=this._fb.group({id:[0],productCode:["",n.kI.required],productName:["",n.kI.required],type:["",n.kI.required],qtyInStock:[0,n.kI.required],active:["0",n.kI.required]}),this.productForm.controls.active.setValue("Y"),this.productService.getProductTypeList()}enableFormControl(o){1==o?(this.productForm.get("productCode").disable(),this.productForm.get("productName").enable(),this.productForm.get("type").enable(),this.productForm.get("qtyInStock").enable(),this.productForm.get("active").enable()):(this.productForm.get("productCode").disable(),this.productForm.get("productName").disable(),this.productForm.get("type").disable(),this.productForm.get("qtyInStock").disable(),this.productForm.get("active").disable())}loadProductDetails(o=-1){-1==o||(this.productService.getProduct(o).pipe((0,d.K)(e=>(this.showToast("Some error has been occured","danger"),(0,u._)(()=>e)))).subscribe(e=>{e.responseData&&(this.loadedProduct=e.responseData[0],this.productForm.patchValue({id:this.loadedProduct.id,productCode:this.loadedProduct.productCode,productName:this.loadedProduct.productName,type:this.loadedProduct.type,qtyInStock:this.loadedProduct.qtyInStock,active:this.loadedProduct.active}))}),this.enableFormControl(!1))}ChangeViewDataFlag(){this.ViewDataFlag=!1,this.enableFormControl(!0)}DeleteProduct(){const o=this.loadedProduct.id;this.alertCtrl.create({header:"Are you sure?",message:"Do you really want to delete the product?",buttons:[{text:"Cancel",role:"cancel"},{text:"Delete",handler:()=>{this.loader.present(),this.productService.deleteProduct(o).pipe((0,d.K)(e=>(this.loader.dismiss(),this.showToast("Some error has been occured","danger"),(0,u._)(()=>e)))).subscribe(e=>{this.loader.dismiss(),e.responseData&&e.responseData.id==this.loadedProduct.id&&0==e.errCode&&(this.showToast("Product Deleted Successfully","secondary"),this.productService.resetValues(),this.fetchProductList(this.productService.pageIndex,this.productService.pageSize,this.productService.searchTerm),this.router.navigate(["/products"]))})}}]}).then(e=>{e.present()})}onSubmit({value:o}){o.id?(this.loader.present(),this.productService.updateProduct(o.id,o).pipe((0,d.K)(e=>(this.loader.dismiss(),this.showToast("Some error has been occured","danger"),(0,u._)(()=>e)))).subscribe(e=>{this.loader.dismiss(),e.responseData&&e.responseData.id&&0==e.errCode&&(this.showToast("Product updated Successfully","secondary"),this.productService.resetValues(),this.fetchProductList(this.productService.pageIndex,this.productService.pageSize,this.productService.searchTerm),this.router.navigate(["/products"]))})):(this.loader.present(),this.productService.AddProduct(o).pipe((0,d.K)(e=>(this.loader.dismiss(),this.showToast("Some error has been occured","danger"),(0,u._)(()=>e)))).subscribe(e=>{this.loader.dismiss(),e.responseData&&e.responseData.id&&0==e.errCode&&(this.showToast("Product Added Successfully","secondary"),this.productService.resetValues(),this.fetchProductList(this.productService.pageIndex,this.productService.pageSize,this.productService.searchTerm),this.router.navigate(["/products"]))}))}fetchProductList(o,e,s){var c=this;return(0,_.Z)(function*(){yield c.productService.refreshProductList(o,e,s),c.productService.pageIndex+=1})()}showToast(o,e){var s=this;return(0,_.Z)(function*(){yield s.toastCtrl.create({message:o,duration:2e3,position:"top",color:e,buttons:[{text:"ok",handler:()=>{}}]}).then(c=>c.present())})()}static#t=this.\u0275fac=function(e){return new(e||i)(t.Y36(p.gz),t.Y36(P.s),t.Y36(p.F0),t.Y36(n.qu),t.Y36(g.Br),t.Y36(g.yF),t.Y36(f.D))};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["app-product-detail"]],standalone:!0,features:[t.jDz],decls:37,vars:7,consts:[[3,"formGroup","ngSubmit"],[3,"translucent"],["color","primary"],["slot","start"],["defaultHref","/products"],["slot","primary",4,"ngIf"],["slot","end",3,"collapse",4,"ngIf"],[3,"fullscreen"],["no-padding",""],["id","ionInputProdCode","label","Product Code","labelPlacement","floating","formControlName","productCode"],["id","ionInputProdName","label","Product Name","labelPlacement","floating","formControlName","productName"],["aria-label","Active","interface","popover","placeholder","Type Id","formControlName","type"],[3,"value",4,"ngFor","ngForOf"],["id","ionInputQtyStock","label","Quantity","labelPlacement","floating","formControlName","qtyInStock"],["aria-label","Active","interface","popover","placeholder","Active","formControlName","active"],["value","Y"],["value","N"],["slot","primary"],[3,"click"],["name","create-outline","slot","icon-only"],["slot","end",3,"collapse"],["type","submit"],[3,"routerLink"],[3,"value"]],template:function(e,s){1&e&&(t.TgZ(0,"form",0),t.NdJ("ngSubmit",function(){return s.onSubmit(s.productForm)}),t.TgZ(1,"ion-header",1)(2,"ion-toolbar",2)(3,"ion-buttons",3),t._UZ(4,"ion-back-button",4),t.qZA(),t.TgZ(5,"ion-title"),t._uU(6,"Product Details"),t.qZA(),t.YNc(7,v,3,0,"ion-buttons",5),t.YNc(8,D,3,1,"ion-buttons",6),t.YNc(9,S,3,3,"ion-buttons",6),t.qZA()(),t.TgZ(10,"ion-content",7)(11,"ion-grid",8)(12,"ion-row")(13,"ion-col",8)(14,"ion-item"),t._UZ(15,"ion-input",9),t.qZA()()(),t.TgZ(16,"ion-row")(17,"ion-col",8)(18,"ion-item"),t._UZ(19,"ion-input",10),t.qZA()()(),t.TgZ(20,"ion-row")(21,"ion-col",8)(22,"ion-item")(23,"ion-select",11),t.YNc(24,T,2,2,"ion-select-option",12),t.qZA()()()(),t.TgZ(25,"ion-row")(26,"ion-col",8)(27,"ion-item"),t._UZ(28,"ion-input",13),t.qZA()()(),t.TgZ(29,"ion-row")(30,"ion-col",8)(31,"ion-item")(32,"ion-select",14)(33,"ion-select-option",15),t._uU(34,"Yes"),t.qZA(),t.TgZ(35,"ion-select-option",16),t._uU(36,"No"),t.qZA()()()()()()()()),2&e&&(t.Q6J("formGroup",s.productForm),t.xp6(1),t.Q6J("translucent",!0),t.xp6(6),t.Q6J("ngIf",1==s.ViewDataFlag),t.xp6(1),t.Q6J("ngIf",0==s.ViewDataFlag),t.xp6(1),t.Q6J("ngIf",0==s.ViewDataFlag),t.xp6(1),t.Q6J("fullscreen",!0),t.xp6(14),t.Q6J("ngForOf",s.productService.productList))},dependencies:[r.Pc,r.YG,r.Sm,r.wI,r.W2,r.jY,r.Gu,r.gu,r.pK,r.Ie,r.Nd,r.t9,r.n0,r.wd,r.sr,r.QI,r.j9,r.oU,r.YI,m.O5,m.ax,p.rH,n.UX,n._Y,n.JJ,n.JL,n.sg,n.u]})}return i})()}}]);